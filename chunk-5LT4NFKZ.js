import{l as I,m as L,p as x,q as k,r as N,s as A}from"./chunk-D4FETZDK.js";import{Ia as P,Ja as R,Ka as w,La as K,Ma as Y,d as E,j as D}from"./chunk-K456UDKZ.js";import{Ba as T,I as u,Ob as _,Pb as n,Qb as a,Xb as M,ac as d,cc as y,da as b,db as g,ia as p,n as m,oa as v,oc as S,pa as h,qc as r,sb as O,yb as f}from"./chunk-7LOXSSZQ.js";var J=class i{CUSTOMER_KEY="khatabook_customers";TRANSACTION_KEY="khatabook_transactions";constructor(){}getCustomers(){let e=localStorage.getItem(this.CUSTOMER_KEY),t=e?JSON.parse(e):[];return m(t).pipe(u(300))}saveCustomers(e){return localStorage.setItem(this.CUSTOMER_KEY,JSON.stringify(e)),m(!0).pipe(u(200))}getTransactions(){let e=localStorage.getItem(this.TRANSACTION_KEY),t=e?JSON.parse(e):[];return m(t).pipe(u(300))}saveTransactions(e){return localStorage.setItem(this.TRANSACTION_KEY,JSON.stringify(e)),m(!0).pipe(u(200))}clearData(){localStorage.removeItem(this.CUSTOMER_KEY),localStorage.removeItem(this.TRANSACTION_KEY)}getFullData(){let e=localStorage.getItem(this.CUSTOMER_KEY),t=localStorage.getItem(this.TRANSACTION_KEY);return{customers:e?JSON.parse(e):[],transactions:t?JSON.parse(t):[]}}importFullData(e){let t=0,o=0,s=this.getFullData();if(e.customers&&Array.isArray(e.customers)){let C=new Set(s.customers.map(l=>l.id)),c=e.customers.filter(l=>!C.has(l.id));if(c.length>0){let l=[...s.customers,...c];localStorage.setItem(this.CUSTOMER_KEY,JSON.stringify(l)),t=c.length}}if(e.transactions&&Array.isArray(e.transactions)){let C=new Set(s.transactions.map(l=>l.id)),c=e.transactions.filter(l=>!C.has(l.id));if(c.length>0){let l=[...s.transactions,...c];localStorage.setItem(this.TRANSACTION_KEY,JSON.stringify(l)),o=c.length}}return{addedCustomers:t,addedTransactions:o}}static \u0275fac=function(t){return new(t||i)};static \u0275prov=b({token:i,factory:i.\u0275fac,providedIn:"root"})};function j(i,e){i&1&&(n(0,"mat-icon",13),r(1,"check_circle"),a())}function z(i,e){i&1&&(n(0,"mat-icon",13),r(1,"check_circle"),a())}function V(i,e){if(i&1){let t=M();n(0,"button",14),d("click",function(){v(t);let s=y();return h(s.cancel())}),r(1,"Cancel"),a()}}var F=class i{dialogRef=p(I);data=p(L,{optional:!0});translationService=p(w);selectedLang=T(this.translationService.getCurrentLanguage());selectLanguage(e){this.selectedLang.set(e)}confirm(){this.translationService.setLanguage(this.selectedLang()),this.dialogRef.close(!0)}cancel(){this.dialogRef.close(!1)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=O({type:i,selectors:[["app-language-selection-dialog"]],decls:27,vars:7,consts:[[1,"dialog-header"],["color","primary"],["mat-dialog-title",""],[1,"subtitle"],[1,"language-options"],[1,"language-card",3,"click"],[1,"lang-info"],[1,"lang-native"],[1,"lang-sub"],["class","check-icon",4,"ngIf"],["align","end"],["mat-button","",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],[1,"check-icon"],["mat-button","",3,"click"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"mat-icon",1),r(2,"translate"),a(),n(3,"h2",2),r(4,"Select Language / \u092D\u093E\u0937\u093E \u091A\u0941\u0928\u0947\u0902"),a()(),n(5,"mat-dialog-content")(6,"p",3),r(7,"Choose your preferred language to continue."),a(),n(8,"div",4)(9,"div",5),d("click",function(){return o.selectLanguage("en")}),n(10,"div",6)(11,"span",7),r(12,"English"),a(),n(13,"span",8),r(14,"English"),a()(),f(15,j,2,0,"mat-icon",9),a(),n(16,"div",5),d("click",function(){return o.selectLanguage("hi")}),n(17,"div",6)(18,"span",7),r(19,"\u0939\u093F\u0902\u0926\u0940"),a(),n(20,"span",8),r(21,"Hindi"),a()(),f(22,z,2,0,"mat-icon",9),a()()(),n(23,"mat-dialog-actions",10),f(24,V,2,0,"button",11),n(25,"button",12),d("click",function(){return o.confirm()}),r(26," Continue / \u0906\u0917\u0947 \u092C\u0922\u093C\u0947\u0902 "),a()()),t&2&&(g(9),S("selected",o.selectedLang()==="en"),g(6),_("ngIf",o.selectedLang()==="en"),g(),S("selected",o.selectedLang()==="hi"),g(6),_("ngIf",o.selectedLang()==="hi"),g(2),_("ngIf",o.data==null?null:o.data.allowCancel))},dependencies:[D,E,A,x,N,k,R,P,Y,K],styles:[".dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:.5rem;padding:1.25rem 1.5rem 0}h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem}.subtitle[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:1.5rem}.language-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.language-card[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;border:2px solid var(--border-color);border-radius:12px;cursor:pointer;transition:all .2s ease}.language-card[_ngcontent-%COMP%]:hover{background-color:var(--background-secondary)}.language-card.selected[_ngcontent-%COMP%]{border-color:var(--primary-color);background-color:rgba(var(--primary-color-rgb),.05)}.language-card.selected[_ngcontent-%COMP%]   .lang-native[_ngcontent-%COMP%]{color:var(--primary-color)}.lang-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.lang-native[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;color:var(--text-primary)}.lang-sub[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary)}.check-icon[_ngcontent-%COMP%]{color:var(--primary-color)}mat-dialog-actions[_ngcontent-%COMP%]{padding-bottom:1.25rem;padding-right:1.5rem}"]})};export{J as a,F as b};
