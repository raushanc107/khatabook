import{I as a,da as l,n as o}from"./chunk-7LOXSSZQ.js";var u=class i{CUSTOMER_KEY="khatabook_customers";TRANSACTION_KEY="khatabook_transactions";constructor(){}getCustomers(){let t=localStorage.getItem(this.CUSTOMER_KEY),s=t?JSON.parse(t):[];return o(s).pipe(a(300))}saveCustomers(t){return localStorage.setItem(this.CUSTOMER_KEY,JSON.stringify(t)),o(!0).pipe(a(200))}getTransactions(){let t=localStorage.getItem(this.TRANSACTION_KEY),s=t?JSON.parse(t):[];return o(s).pipe(a(300))}saveTransactions(t){return localStorage.setItem(this.TRANSACTION_KEY,JSON.stringify(t)),o(!0).pipe(a(200))}clearData(){localStorage.removeItem(this.CUSTOMER_KEY),localStorage.removeItem(this.TRANSACTION_KEY)}getFullData(){let t=localStorage.getItem(this.CUSTOMER_KEY),s=localStorage.getItem(this.TRANSACTION_KEY);return{customers:t?JSON.parse(t):[],transactions:s?JSON.parse(s):[]}}importFullData(t){let s=0,m=0,n=this.getFullData();if(t.customers&&Array.isArray(t.customers)){let c=new Set(n.customers.map(e=>e.id)),r=t.customers.filter(e=>!c.has(e.id));if(r.length>0){let e=[...n.customers,...r];localStorage.setItem(this.CUSTOMER_KEY,JSON.stringify(e)),s=r.length}}if(t.transactions&&Array.isArray(t.transactions)){let c=new Set(n.transactions.map(e=>e.id)),r=t.transactions.filter(e=>!c.has(e.id));if(r.length>0){let e=[...n.transactions,...r];localStorage.setItem(this.TRANSACTION_KEY,JSON.stringify(e)),m=r.length}}return{addedCustomers:s,addedTransactions:m}}static \u0275fac=function(s){return new(s||i)};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})};export{u as a};
