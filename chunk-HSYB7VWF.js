import{a as L,b as W}from"./chunk-ZLDOGPFM.js";import{a as q,b as Q}from"./chunk-RYKCFJSD.js";import{l as y,m as J,n as $,o as I,p as E,q as D,r as S}from"./chunk-ZLNFULDA.js";import{a as K}from"./chunk-6EBKRAX4.js";import"./chunk-3VODW7RF.js";import{Ga as G,Ia as T,Ja as x,Ka as R,La as O,Ma as b,d as A,j as M,r as H}from"./chunk-PRN6765B.js";import{Ob as P,Pb as t,Qb as n,Rb as v,Xb as z,ac as c,bb as w,cc as B,db as o,ia as d,mc as N,oa as p,pa as _,pc as U,qc as i,rc as a,sb as u,sc as C,yb as F}from"./chunk-7LOXSSZQ.js";function ot(g,m){if(g&1&&(t(0,"mat-icon"),i(1),n()),g&2){let r=B();U("icon-"+(r.data.iconColor||"primary")),o(),a(r.data.icon)}}var f=class g{dialogRef=d(y);data=d(J);onClose(){this.dialogRef.close()}static \u0275fac=function(r){return new(r||g)};static \u0275cmp=u({type:g,selectors:[["app-info-dialog"]],decls:9,vars:4,consts:[[1,"dialog-header"],[3,"class",4,"ngIf"],["mat-dialog-title",""],[3,"innerHTML"],["align","end"],["mat-raised-button","","color","primary",3,"click"]],template:function(r,e){r&1&&(t(0,"div",0),F(1,ot,2,3,"mat-icon",1),t(2,"h2",2),i(3),n()(),t(4,"mat-dialog-content"),v(5,"p",3),n(),t(6,"mat-dialog-actions",4)(7,"button",5),c("click",function(){return e.onClose()}),i(8),n()()),r&2&&(o(),P("ngIf",e.data.icon),o(2),a(e.data.title),o(2),P("innerHTML",e.data.message,w),o(3),a(e.data.buttonText||"OK"))},dependencies:[M,A,S,I,D,E,x,T,b,O],styles:[".dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:.5rem;padding:1.25rem 1.5rem 0}h2[_ngcontent-%COMP%]{margin:0}mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.icon-primary[_ngcontent-%COMP%]{color:var(--primary-color)}.icon-warn[_ngcontent-%COMP%]{color:var(--error-color)}.icon-accent[_ngcontent-%COMP%]{color:var(--accent-color)}.icon-success[_ngcontent-%COMP%]{color:var(--success-color)}mat-dialog-content[_ngcontent-%COMP%]{padding-top:1rem!important;min-width:300px;max-width:400px}p[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);line-height:1.6;white-space:pre-line}"]})};var V=class g{dialogRef=d(y);localStorageService=d(L);translationService=d(R);onCancel(){this.dialogRef.close()}onBackup(){let m=this.localStorageService.getFullData(),r=JSON.stringify(m,null,2),e=new Blob([r],{type:"application/json"}),s=window.URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=`khatabook_backup_${new Date().toISOString().split("T")[0]}.json`,l.click(),window.URL.revokeObjectURL(s)}onReset(){this.dialogRef.close("reset")}static \u0275fac=function(r){return new(r||g)};static \u0275cmp=u({type:g,selectors:[["app-factory-reset-dialog"]],decls:18,vars:6,consts:[[1,"dialog-header"],[1,"icon-warn"],["mat-dialog-title",""],[1,"warning-text",3,"innerHTML"],["align","end",1,"dialog-actions"],["mat-button","",3,"click"],["mat-stroked-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(r,e){r&1&&(t(0,"div",0)(1,"mat-icon",1),i(2,"warning"),n(),t(3,"h2",2),i(4),n()(),t(5,"mat-dialog-content"),v(6,"p",3),t(7,"p"),i(8),n()(),t(9,"mat-dialog-actions",4)(10,"button",5),c("click",function(){return e.onCancel()}),i(11),n(),t(12,"button",6),c("click",function(){return e.onBackup()}),t(13,"mat-icon"),i(14,"download"),n(),i(15),n(),t(16,"button",7),c("click",function(){return e.onReset()}),i(17),n()()),r&2&&(o(4),a(e.translationService.t().dialogs.factory_reset_title),o(2),P("innerHTML",e.translationService.t().dialogs.factory_reset_warning,w),o(2),C(" ",e.translationService.t().dialogs.factory_reset_backup_recommendation," "),o(3),a(e.translationService.t().common.cancel),o(4),C(" ",e.translationService.t().dialogs.backup_data," "),o(2),C(" ",e.translationService.t().dialogs.reset_everything," "))},dependencies:[M,S,I,D,E,x,T,b,O],styles:[".dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:.5rem;padding:1.25rem 1.5rem 0}h2[_ngcontent-%COMP%]{margin:0}mat-icon.icon-warn[_ngcontent-%COMP%]{color:var(--error-color);font-size:32px;width:32px;height:32px}mat-dialog-content[_ngcontent-%COMP%]{padding-top:1rem!important;min-width:320px;max-width:450px}p[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--text-secondary);line-height:1.6}.warning-text[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:.5rem}strong[_ngcontent-%COMP%]{color:var(--error-color);font-weight:600}.dialog-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;padding-bottom:1.25rem;padding-right:1.5rem}@media(max-width:480px){.dialog-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}button[_ngcontent-%COMP%]{width:100%;margin-left:0!important}}"]})};var et=class g{router=d(H);themeService=d(K);localStorageService=d(L);translationService=d(R);dialog=d($);version="1.2.0";goBack(){this.router.navigate(["/"])}goToReports(){this.router.navigate(["/reports"])}changeLanguage(){this.dialog.open(W,{data:{allowCancel:!0}})}exportData(){let m=this.localStorageService.getFullData(),r=JSON.stringify(m,null,2),e=new Blob([r],{type:"application/json"}),s=window.URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=`khatabook_backup_${new Date().toISOString().split("T")[0]}.json`,l.click(),window.URL.revokeObjectURL(s)}importData(m){let r=m.target;if(!r.files||r.files.length===0)return;let e=r.files[0],s=new FileReader;s.onload=l=>{try{let h=l.target?.result,j=JSON.parse(h);if(j.customers||j.transactions){let k=this.localStorageService.importFullData(j);if(k.addedCustomers===0&&k.addedTransactions===0)this.dialog.open(f,{data:{title:this.translationService.t().dialogs.no_new_data_title,message:this.translationService.t().dialogs.no_new_data_msg,icon:"info",iconColor:"primary"}});else{let nt=this.translationService.t().dialogs.import_success_msg.replace("{customers}",k.addedCustomers.toString()).replace("{transactions}",k.addedTransactions.toString());this.dialog.open(f,{data:{title:this.translationService.t().dialogs.import_success_title,message:nt,icon:"check_circle",iconColor:"success"}}).afterClosed().subscribe(()=>window.location.reload())}}else this.dialog.open(f,{data:{title:this.translationService.t().dialogs.invalid_file_title,message:this.translationService.t().dialogs.invalid_file_msg,icon:"error",iconColor:"warn"}})}catch{this.dialog.open(f,{data:{title:this.translationService.t().dialogs.error_parsing_title,message:this.translationService.t().dialogs.error_parsing_msg,icon:"error",iconColor:"warn"}})}},s.readAsText(e),r.value=""}factoryReset(){this.dialog.open(V).afterClosed().subscribe(r=>{r==="reset"&&(this.localStorageService.clearData(),window.location.reload())})}static \u0275fac=function(r){return new(r||g)};static \u0275cmp=u({type:g,selectors:[["app-settings"]],decls:124,vars:25,consts:[["fileInput",""],[1,"settings-container"],[1,"settings-header"],["mat-icon-button","",3,"click"],[1,"settings-content"],[1,"settings-section"],[1,"section-title"],[1,"settings-card"],[1,"setting-item",3,"click"],[1,"setting-info"],[1,"setting-text"],[1,"label"],[1,"description"],[1,"chevron"],["type","file","accept",".json",2,"display","none",3,"change"],[1,"section-title","text-danger"],[1,"settings-card","danger-card"],["color","warn"],[1,"label","text-danger"],[1,"setting-item","inactive"],[1,"setting-item"],[1,"footer-msg"]],template:function(r,e){if(r&1){let s=z();t(0,"div",1)(1,"header",2)(2,"button",3),c("click",function(){return p(s),_(e.goBack())}),t(3,"mat-icon"),i(4,"arrow_back"),n()(),t(5,"h1"),i(6),n()(),t(7,"div",4)(8,"section",5)(9,"h2",6),i(10),n(),t(11,"div",7)(12,"div",8),c("click",function(){return p(s),_(e.changeLanguage())}),t(13,"div",9)(14,"mat-icon"),i(15,"translate"),n(),t(16,"div",10)(17,"span",11),i(18),n(),t(19,"span",12),i(20),n()()(),t(21,"mat-icon",13),i(22,"chevron_right"),n()()()(),t(23,"section",5)(24,"h2",6),i(25),n(),t(26,"div",7)(27,"div",8),c("click",function(){return p(s),_(e.themeService.toggleTheme())}),t(28,"div",9)(29,"mat-icon"),i(30),n(),t(31,"div",10)(32,"span",11),i(33),n(),t(34,"span",12),i(35),n()()(),t(36,"mat-icon",13),i(37,"chevron_right"),n()()()(),t(38,"section",5)(39,"h2",6),i(40),n(),t(41,"div",7)(42,"div",8),c("click",function(){return p(s),_(e.goToReports())}),t(43,"div",9)(44,"mat-icon"),i(45,"bar_chart"),n(),t(46,"div",10)(47,"span",11),i(48),n(),t(49,"span",12),i(50),n()()(),t(51,"mat-icon",13),i(52,"chevron_right"),n()()()(),t(53,"section",5)(54,"h2",6),i(55),n(),t(56,"div",7)(57,"div",8),c("click",function(){return p(s),_(e.exportData())}),t(58,"div",9)(59,"mat-icon"),i(60,"download"),n(),t(61,"div",10)(62,"span",11),i(63),n(),t(64,"span",12),i(65),n()()(),t(66,"mat-icon",13),i(67,"chevron_right"),n()(),v(68,"mat-divider"),t(69,"div",8),c("click",function(){p(s);let h=N(81);return _(h.click())}),t(70,"div",9)(71,"mat-icon"),i(72,"upload"),n(),t(73,"div",10)(74,"span",11),i(75),n(),t(76,"span",12),i(77),n()()(),t(78,"mat-icon",13),i(79,"chevron_right"),n()(),t(80,"input",14,0),c("change",function(h){return p(s),_(e.importData(h))}),n()()(),t(82,"section",5)(83,"h2",15),i(84),n(),t(85,"div",16)(86,"div",8),c("click",function(){return p(s),_(e.factoryReset())}),t(87,"div",9)(88,"mat-icon",17),i(89,"delete_forever"),n(),t(90,"div",10)(91,"span",18),i(92),n(),t(93,"span",12),i(94),n()()(),t(95,"mat-icon",13),i(96,"chevron_right"),n()()()(),t(97,"section",5)(98,"h2",6),i(99),n(),t(100,"div",7)(101,"div",19)(102,"div",9)(103,"mat-icon"),i(104,"info"),n(),t(105,"div",10)(106,"span",11),i(107),n(),t(108,"span",12),i(109),n()()()(),v(110,"mat-divider"),t(111,"div",20)(112,"div",9)(113,"mat-icon"),i(114,"help"),n(),t(115,"div",10)(116,"span",11),i(117),n(),t(118,"span",12),i(119),n()()(),t(120,"mat-icon",13),i(121,"open_in_new"),n()()()(),t(122,"div",21),i(123),n()()()}r&2&&(o(6),a(e.translationService.t().settings.title),o(4),a(e.translationService.t().settings.language),o(8),a(e.translationService.t().settings.language),o(2),a(e.translationService.t().settings.language_desc),o(5),a(e.translationService.t().settings.appearance),o(5),a(e.themeService.currentTheme()==="dark"?"light_mode":"dark_mode"),o(3),a(e.translationService.t().settings.dark_mode),o(2),a(e.themeService.currentTheme()==="dark"?e.translationService.t().settings.dark_mode_on:e.translationService.t().settings.dark_mode_off),o(5),a(e.translationService.t().settings.analytics),o(8),a(e.translationService.t().settings.reports),o(2),a(e.translationService.t().settings.reports_desc),o(5),a(e.translationService.t().settings.data_management),o(8),a(e.translationService.t().settings.export_backup),o(2),a(e.translationService.t().settings.export_backup_desc),o(10),a(e.translationService.t().settings.import_backup),o(2),a(e.translationService.t().settings.import_backup_desc),o(7),a(e.translationService.t().settings.danger_zone),o(8),a(e.translationService.t().settings.factory_reset),o(2),a(e.translationService.t().settings.factory_reset_desc),o(5),a(e.translationService.t().settings.about),o(8),a(e.translationService.t().settings.version),o(2),a(e.version),o(8),a(e.translationService.t().settings.help_support),o(2),a(e.translationService.t().settings.help_support_desc),o(4),C(" ",e.translationService.t().settings.footer_msg," "))},dependencies:[M,x,G,b,O,Q,q,S],styles:[".settings-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f8fafc,#eef2ff);padding-bottom:3rem}[_nghost-%COMP%]{display:block;background-color:var(--background-color);min-height:100vh}.text-danger[_ngcontent-%COMP%]{color:var(--error-color)!important}.danger-card[_ngcontent-%COMP%]{border:1px solid rgba(var(--error-color-rgb),.2)}.danger-card[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]:hover{background-color:rgba(var(--error-color-rgb),.05)}.dark-theme[_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%]{background:var(--background-color)}.settings-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.75rem 1rem;height:60px;box-sizing:border-box;background:var(--surface-color);border-bottom:1px solid var(--border-color);position:sticky;top:0;z-index:10}.settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:var(--primary-color);background:none;-webkit-background-clip:unset;background-clip:unset;-webkit-text-fill-color:initial}.settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;border-radius:50%;color:var(--text-primary);padding:8px}.settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--hover-bg)}.dark-theme[_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%]{background:var(--surface-color);border-bottom:1px solid var(--border-color)}.dark-theme[_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary-color)}.dark-theme[_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-color:var(--border-color);color:var(--text-primary)}.settings-content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:1.5rem}.settings-section[_ngcontent-%COMP%]{margin-bottom:2rem}.settings-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:.8125rem;font-weight:700;text-transform:uppercase;letter-spacing:.1em;color:var(--text-secondary);margin:0 0 .75rem 1rem}.dark-theme[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{color:var(--text-secondary)}.settings-card[_ngcontent-%COMP%]{background:#fff9;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border:1px solid rgba(255,255,255,.4);border-radius:20px;box-shadow:0 8px 32px #1f268712;overflow:hidden}.dark-theme[_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]{background:var(--surface-color);border:1px solid rgba(255,255,255,.1);box-shadow:0 8px 32px #0000004d}.setting-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.25rem 1.5rem;cursor:pointer;transition:all .2s ease}.setting-item[_ngcontent-%COMP%]:hover:not(.inactive){background:#fff6}.setting-item.inactive[_ngcontent-%COMP%]{cursor:default}.setting-item[_ngcontent-%COMP%]   .setting-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.25rem}.setting-item[_ngcontent-%COMP%]   .setting-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#44474e;font-size:1.5rem;width:1.5rem;height:1.5rem}.setting-item[_ngcontent-%COMP%]   .setting-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.setting-item[_ngcontent-%COMP%]   .setting-text[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary)}.setting-item[_ngcontent-%COMP%]   .setting-text[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--text-secondary)}.setting-item[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{color:var(--text-secondary);opacity:.5;font-size:1.25rem}.dark-theme[_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]:hover:not(.inactive), .dark-theme   [_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]:hover:not(.inactive){background:#ffffff0d}.dark-theme[_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--text-primary)}.dark-theme[_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:var(--text-secondary)}.dark-theme[_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{color:var(--text-secondary)}.dark-theme[_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--text-primary)}.footer-msg[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);font-size:.8125rem;margin-top:2rem;opacity:.7}@media(max-width:768px){.settings-content[_ngcontent-%COMP%]{padding:1rem}}"]})};export{et as SettingsComponent};
