import{a as $}from"./chunk-BBXHLK6T.js";import{a as K,b as G}from"./chunk-T7NCY2CG.js";import{l as z,m as A,n as j,o as B,p as L,q as F,r as v}from"./chunk-APDNVG3J.js";import{a as U}from"./chunk-RCBGXLN4.js";import"./chunk-3VODW7RF.js";import{Ga as H,Ia as J,Ja as x,Ka as O,La as k,d as V,j as h,r as N}from"./chunk-HAXKXQNK.js";import{Ob as S,Pb as t,Qb as e,Rb as C,Xb as D,ac as d,bb as y,cc as E,db as c,ia as m,mc as I,oa as u,pa as _,pc as T,qc as n,rc as g,sb as M,sc as R,yb as w}from"./chunk-7LOXSSZQ.js";function Z(l,s){if(l&1&&(t(0,"mat-icon"),n(1),e()),l&2){let i=E();T("icon-"+(i.data.iconColor||"primary")),c(),g(i.data.icon)}}var p=class l{dialogRef=m(z);data=m(A);onClose(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=M({type:l,selectors:[["app-info-dialog"]],decls:9,vars:4,consts:[[1,"dialog-header"],[3,"class",4,"ngIf"],["mat-dialog-title",""],[3,"innerHTML"],["align","end"],["mat-raised-button","","color","primary",3,"click"]],template:function(i,o){i&1&&(t(0,"div",0),w(1,Z,2,3,"mat-icon",1),t(2,"h2",2),n(3),e()(),t(4,"mat-dialog-content"),C(5,"p",3),e(),t(6,"mat-dialog-actions",4)(7,"button",5),d("click",function(){return o.onClose()}),n(8),e()()),i&2&&(c(),S("ngIf",o.data.icon),c(2),g(o.data.title),c(2),S("innerHTML",o.data.message,y),c(3),g(o.data.buttonText||"OK"))},dependencies:[h,V,v,B,F,L,x,J,k,O],styles:[".dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:.5rem;padding:1.25rem 1.5rem 0}h2[_ngcontent-%COMP%]{margin:0}mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.icon-primary[_ngcontent-%COMP%]{color:var(--primary-color)}.icon-warn[_ngcontent-%COMP%]{color:var(--error-color)}.icon-accent[_ngcontent-%COMP%]{color:var(--accent-color)}.icon-success[_ngcontent-%COMP%]{color:var(--success-color)}mat-dialog-content[_ngcontent-%COMP%]{padding-top:1rem!important;min-width:300px;max-width:400px}p[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);line-height:1.6;white-space:pre-line}"]})};var q=class l{router=m(N);themeService=m(U);localStorageService=m($);dialog=m(j);version="1.2.0";goBack(){this.router.navigate(["/"])}exportData(){let s=this.localStorageService.getFullData(),i=JSON.stringify(s,null,2),o=new Blob([i],{type:"application/json"}),a=window.URL.createObjectURL(o),r=document.createElement("a");r.href=a,r.download=`khatabook_backup_${new Date().toISOString().split("T")[0]}.json`,r.click(),window.URL.revokeObjectURL(a)}importData(s){let i=s.target;if(!i.files||i.files.length===0)return;let o=i.files[0],a=new FileReader;a.onload=r=>{try{let f=r.target?.result,P=JSON.parse(f);if(P.customers||P.transactions){let b=this.localStorageService.importFullData(P);b.addedCustomers===0&&b.addedTransactions===0?this.dialog.open(p,{data:{title:"No New Data",message:"All items in the backup already exist in your current data.",icon:"info",iconColor:"primary"}}):this.dialog.open(p,{data:{title:"Import Successful!",message:`Added:
\u2022 ${b.addedCustomers} new customer(s)
\u2022 ${b.addedTransactions} new transaction(s)

The application will now reload to apply changes.`,icon:"check_circle",iconColor:"success"}}).afterClosed().subscribe(()=>window.location.reload())}else this.dialog.open(p,{data:{title:"Invalid File",message:"The selected file is not a valid Khatabook backup.",icon:"error",iconColor:"warn"}})}catch{this.dialog.open(p,{data:{title:"Error",message:"Failed to parse the backup file.",icon:"error",iconColor:"warn"}})}},a.readAsText(o),i.value=""}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=M({type:l,selectors:[["app-settings"]],decls:79,vars:3,consts:[["fileInput",""],[1,"settings-container"],[1,"settings-header"],["mat-icon-button","",3,"click"],[1,"settings-content"],[1,"settings-section"],[1,"section-title"],[1,"settings-card"],[1,"setting-item",3,"click"],[1,"setting-info"],[1,"setting-text"],[1,"label"],[1,"description"],[1,"chevron"],["type","file","accept",".json",2,"display","none",3,"change"],[1,"setting-item","inactive"],[1,"setting-item"],[1,"footer-msg"]],template:function(i,o){if(i&1){let a=D();t(0,"div",1)(1,"header",2)(2,"button",3),d("click",function(){return u(a),_(o.goBack())}),t(3,"mat-icon"),n(4,"arrow_back"),e()(),t(5,"h1"),n(6,"Settings"),e()(),t(7,"div",4)(8,"section",5)(9,"h2",6),n(10,"Appearance"),e(),t(11,"div",7)(12,"div",8),d("click",function(){return u(a),_(o.themeService.toggleTheme())}),t(13,"div",9)(14,"mat-icon"),n(15),e(),t(16,"div",10)(17,"span",11),n(18,"Dark Mode"),e(),t(19,"span",12),n(20),e()()(),t(21,"mat-icon",13),n(22,"chevron_right"),e()()()(),t(23,"section",5)(24,"h2",6),n(25,"Data Management"),e(),t(26,"div",7)(27,"div",8),d("click",function(){return u(a),_(o.exportData())}),t(28,"div",9)(29,"mat-icon"),n(30,"download"),e(),t(31,"div",10)(32,"span",11),n(33,"Export Backup"),e(),t(34,"span",12),n(35,"Save your data to a JSON file"),e()()(),t(36,"mat-icon",13),n(37,"chevron_right"),e()(),C(38,"mat-divider"),t(39,"div",8),d("click",function(){u(a);let f=I(51);return _(f.click())}),t(40,"div",9)(41,"mat-icon"),n(42,"upload"),e(),t(43,"div",10)(44,"span",11),n(45,"Import Backup"),e(),t(46,"span",12),n(47,"Restore data from a JSON backup"),e()()(),t(48,"mat-icon",13),n(49,"chevron_right"),e()(),t(50,"input",14,0),d("change",function(f){return u(a),_(o.importData(f))}),e()()(),t(52,"section",5)(53,"h2",6),n(54,"About"),e(),t(55,"div",7)(56,"div",15)(57,"div",9)(58,"mat-icon"),n(59,"info"),e(),t(60,"div",10)(61,"span",11),n(62,"Version"),e(),t(63,"span",12),n(64),e()()()(),C(65,"mat-divider"),t(66,"div",16)(67,"div",9)(68,"mat-icon"),n(69,"help"),e(),t(70,"div",10)(71,"span",11),n(72,"Help & Support"),e(),t(73,"span",12),n(74,"Contact us for assistance"),e()()(),t(75,"mat-icon",13),n(76,"open_in_new"),e()()()(),t(77,"div",17),n(78," Made with \u{1F496} for small businesses "),e()()()}i&2&&(c(15),g(o.themeService.currentTheme()==="dark"?"light_mode":"dark_mode"),c(5),R("Currently ",o.themeService.currentTheme()==="dark"?"Enabled":"Disabled"),c(44),g(o.version))},dependencies:[h,x,H,k,O,G,K,v],styles:[".settings-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f8fafc,#eef2ff);padding-bottom:3rem}body.dark-theme[_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0f172a,#1e1b4b)}.settings-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.5rem;background:#ffffffb3;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-bottom:1px solid rgba(255,255,255,.3);position:sticky;top:0;z-index:10}.settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:800;line-height:1.4;padding-bottom:4px;background:linear-gradient(to right,var(--primary-color),var(--primary-dark));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:-.02em}.settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ffffff80;border:1px solid rgba(255,255,255,.8);border-radius:12px}body.dark-theme[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]{background:#0f172ab3;border-bottom:1px solid rgba(255,255,255,.1)}body.dark-theme[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{background:linear-gradient(to right,var(--primary-light),#c7d2fe);-webkit-background-clip:text;background-clip:text}body.dark-theme[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ffffff0d;border-color:#ffffff1a;color:#fff}body.dark-theme[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#e2e8f0}.settings-content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:1.5rem}.settings-section[_ngcontent-%COMP%]{margin-bottom:2rem}.settings-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:.8125rem;font-weight:700;text-transform:uppercase;letter-spacing:.1em;color:var(--text-secondary);margin:0 0 .75rem 1rem}body.dark-theme[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:#94a3b8}.settings-card[_ngcontent-%COMP%]{background:#fff9;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border:1px solid rgba(255,255,255,.4);border-radius:20px;box-shadow:0 8px 32px #1f268712;overflow:hidden}body.dark-theme[_ngcontent-%COMP%]   .settings-card[_ngcontent-%COMP%]{background:#1e293b99;border:1px solid rgba(255,255,255,.1);box-shadow:0 8px 32px #0000004d}.setting-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.25rem 1.5rem;cursor:pointer;transition:all .2s ease}.setting-item[_ngcontent-%COMP%]:hover:not(.inactive){background:#fff6}.setting-item.inactive[_ngcontent-%COMP%]{cursor:default}.setting-item[_ngcontent-%COMP%]   .setting-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.25rem}.setting-item[_ngcontent-%COMP%]   .setting-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.5rem;width:1.5rem;height:1.5rem}.setting-item[_ngcontent-%COMP%]   .setting-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.setting-item[_ngcontent-%COMP%]   .setting-text[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary)}.setting-item[_ngcontent-%COMP%]   .setting-text[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--text-secondary)}.setting-item[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{color:var(--text-secondary);opacity:.5;font-size:1.25rem}body.dark-theme[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]:hover:not(.inactive){background:#ffffff0d}body.dark-theme[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#f1f5f9}body.dark-theme[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#94a3b8}body.dark-theme[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{color:#64748b}.footer-msg[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);font-size:.8125rem;margin-top:2rem;opacity:.7}@media(max-width:768px){.settings-content[_ngcontent-%COMP%]{padding:1rem}}"]})};export{q as SettingsComponent};
