import{a as $}from"./chunk-BBXHLK6T.js";import{a as K,b as G}from"./chunk-T7NCY2CG.js";import{l as A,m as N,n as j,o as B,p as L,q as F,r as O}from"./chunk-APDNVG3J.js";import{a as U}from"./chunk-RCBGXLN4.js";import"./chunk-3VODW7RF.js";import{Ga as H,Ia as J,Ja as P,Ka as x,La as b,d as V,j as v,r as z}from"./chunk-HAXKXQNK.js";import{Ob as S,Pb as t,Qb as e,Rb as C,Xb as D,ac as s,bb as w,cc as E,db as c,ia as d,mc as I,oa as g,pa as p,pc as T,qc as n,rc as _,sb as u,sc as R,yb as y}from"./chunk-7LOXSSZQ.js";function Z(l,m){if(l&1&&(t(0,"mat-icon"),n(1),e()),l&2){let i=E();T("icon-"+(i.data.iconColor||"primary")),c(),_(i.data.icon)}}var f=class l{dialogRef=d(A);data=d(N);onClose(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=u({type:l,selectors:[["app-info-dialog"]],decls:9,vars:4,consts:[[1,"dialog-header"],[3,"class",4,"ngIf"],["mat-dialog-title",""],[3,"innerHTML"],["align","end"],["mat-raised-button","","color","primary",3,"click"]],template:function(i,o){i&1&&(t(0,"div",0),y(1,Z,2,3,"mat-icon",1),t(2,"h2",2),n(3),e()(),t(4,"mat-dialog-content"),C(5,"p",3),e(),t(6,"mat-dialog-actions",4)(7,"button",5),s("click",function(){return o.onClose()}),n(8),e()()),i&2&&(c(),S("ngIf",o.data.icon),c(2),_(o.data.title),c(2),S("innerHTML",o.data.message,w),c(3),_(o.data.buttonText||"OK"))},dependencies:[v,V,O,B,F,L,P,J,b,x],styles:[".dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:.5rem;padding:1.25rem 1.5rem 0}h2[_ngcontent-%COMP%]{margin:0}mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.icon-primary[_ngcontent-%COMP%]{color:var(--primary-color)}.icon-warn[_ngcontent-%COMP%]{color:var(--error-color)}.icon-accent[_ngcontent-%COMP%]{color:var(--accent-color)}.icon-success[_ngcontent-%COMP%]{color:var(--success-color)}mat-dialog-content[_ngcontent-%COMP%]{padding-top:1rem!important;min-width:300px;max-width:400px}p[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);line-height:1.6;white-space:pre-line}"]})};var q=class l{router=d(z);themeService=d(U);localStorageService=d($);dialog=d(j);version="1.2.1";goBack(){this.router.navigate(["/"])}goToReports(){this.router.navigate(["/reports"])}exportData(){let m=this.localStorageService.getFullData(),i=JSON.stringify(m,null,2),o=new Blob([i],{type:"application/json"}),r=window.URL.createObjectURL(o),a=document.createElement("a");a.href=r,a.download=`khatabook_backup_${new Date().toISOString().split("T")[0]}.json`,a.click(),window.URL.revokeObjectURL(r)}importData(m){let i=m.target;if(!i.files||i.files.length===0)return;let o=i.files[0],r=new FileReader;r.onload=a=>{try{let h=a.target?.result,k=JSON.parse(h);if(k.customers||k.transactions){let M=this.localStorageService.importFullData(k);M.addedCustomers===0&&M.addedTransactions===0?this.dialog.open(f,{data:{title:"No New Data",message:"All items in the backup already exist in your current data.",icon:"info",iconColor:"primary"}}):this.dialog.open(f,{data:{title:"Import Successful!",message:`Added:
\u2022 ${M.addedCustomers} new customer(s)
\u2022 ${M.addedTransactions} new transaction(s)

The application will now reload to apply changes.`,icon:"check_circle",iconColor:"success"}}).afterClosed().subscribe(()=>window.location.reload())}else this.dialog.open(f,{data:{title:"Invalid File",message:"The selected file is not a valid Khatabook backup.",icon:"error",iconColor:"warn"}})}catch{this.dialog.open(f,{data:{title:"Error",message:"Failed to parse the backup file.",icon:"error",iconColor:"warn"}})}},r.readAsText(o),i.value=""}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=u({type:l,selectors:[["app-settings"]],decls:94,vars:3,consts:[["fileInput",""],[1,"settings-container"],[1,"settings-header"],["mat-icon-button","",3,"click"],[1,"settings-content"],[1,"settings-section"],[1,"section-title"],[1,"settings-card"],[1,"setting-item",3,"click"],[1,"setting-info"],[1,"setting-text"],[1,"label"],[1,"description"],[1,"chevron"],["type","file","accept",".json",2,"display","none",3,"change"],[1,"setting-item","inactive"],[1,"setting-item"],[1,"footer-msg"]],template:function(i,o){if(i&1){let r=D();t(0,"div",1)(1,"header",2)(2,"button",3),s("click",function(){return g(r),p(o.goBack())}),t(3,"mat-icon"),n(4,"arrow_back"),e()(),t(5,"h1"),n(6,"Settings"),e()(),t(7,"div",4)(8,"section",5)(9,"h2",6),n(10,"Appearance"),e(),t(11,"div",7)(12,"div",8),s("click",function(){return g(r),p(o.themeService.toggleTheme())}),t(13,"div",9)(14,"mat-icon"),n(15),e(),t(16,"div",10)(17,"span",11),n(18,"Dark Mode"),e(),t(19,"span",12),n(20),e()()(),t(21,"mat-icon",13),n(22,"chevron_right"),e()()()(),t(23,"section",5)(24,"h2",6),n(25,"Analytics"),e(),t(26,"div",7)(27,"div",8),s("click",function(){return g(r),p(o.goToReports())}),t(28,"div",9)(29,"mat-icon"),n(30,"bar_chart"),e(),t(31,"div",10)(32,"span",11),n(33,"Reports & Insights"),e(),t(34,"span",12),n(35,"View financial metrics and trends"),e()()(),t(36,"mat-icon",13),n(37,"chevron_right"),e()()()(),t(38,"section",5)(39,"h2",6),n(40,"Data Management"),e(),t(41,"div",7)(42,"div",8),s("click",function(){return g(r),p(o.exportData())}),t(43,"div",9)(44,"mat-icon"),n(45,"download"),e(),t(46,"div",10)(47,"span",11),n(48,"Export Backup"),e(),t(49,"span",12),n(50,"Save your data to a JSON file"),e()()(),t(51,"mat-icon",13),n(52,"chevron_right"),e()(),C(53,"mat-divider"),t(54,"div",8),s("click",function(){g(r);let h=I(66);return p(h.click())}),t(55,"div",9)(56,"mat-icon"),n(57,"upload"),e(),t(58,"div",10)(59,"span",11),n(60,"Import Backup"),e(),t(61,"span",12),n(62,"Restore data from a JSON backup"),e()()(),t(63,"mat-icon",13),n(64,"chevron_right"),e()(),t(65,"input",14,0),s("change",function(h){return g(r),p(o.importData(h))}),e()()(),t(67,"section",5)(68,"h2",6),n(69,"About"),e(),t(70,"div",7)(71,"div",15)(72,"div",9)(73,"mat-icon"),n(74,"info"),e(),t(75,"div",10)(76,"span",11),n(77,"Version"),e(),t(78,"span",12),n(79),e()()()(),C(80,"mat-divider"),t(81,"div",16)(82,"div",9)(83,"mat-icon"),n(84,"help"),e(),t(85,"div",10)(86,"span",11),n(87,"Help & Support"),e(),t(88,"span",12),n(89,"Contact us for assistance"),e()()(),t(90,"mat-icon",13),n(91,"open_in_new"),e()()()(),t(92,"div",17),n(93," Made with \u{1F496} for small businesses "),e()()()}i&2&&(c(15),_(o.themeService.currentTheme()==="dark"?"light_mode":"dark_mode"),c(5),R("Currently ",o.themeService.currentTheme()==="dark"?"Enabled":"Disabled"),c(59),_(o.version))},dependencies:[v,P,H,b,x,G,K,O],styles:[".settings-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f8fafc,#eef2ff);padding-bottom:3rem}.dark-theme[_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%]{background:var(--background-color)}.settings-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.75rem 1rem;height:60px;box-sizing:border-box;background:var(--surface-color);border-bottom:1px solid var(--border-color);position:sticky;top:0;z-index:10}.settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:var(--primary-color);background:none;-webkit-background-clip:unset;background-clip:unset;-webkit-text-fill-color:initial}.settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;border-radius:50%;color:var(--text-primary);padding:8px}.settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--hover-bg)}.dark-theme[_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%]{background:var(--surface-color);border-bottom:1px solid var(--border-color)}.dark-theme[_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary-color)}.dark-theme[_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-color:var(--border-color);color:var(--text-primary)}.settings-content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:1.5rem}.settings-section[_ngcontent-%COMP%]{margin-bottom:2rem}.settings-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:.8125rem;font-weight:700;text-transform:uppercase;letter-spacing:.1em;color:var(--text-secondary);margin:0 0 .75rem 1rem}.dark-theme[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{color:var(--text-secondary)}.settings-card[_ngcontent-%COMP%]{background:#fff9;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border:1px solid rgba(255,255,255,.4);border-radius:20px;box-shadow:0 8px 32px #1f268712;overflow:hidden}.dark-theme[_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]{background:var(--surface-color);border:1px solid rgba(255,255,255,.1);box-shadow:0 8px 32px #0000004d}.setting-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.25rem 1.5rem;cursor:pointer;transition:all .2s ease}.setting-item[_ngcontent-%COMP%]:hover:not(.inactive){background:#fff6}.setting-item.inactive[_ngcontent-%COMP%]{cursor:default}.setting-item[_ngcontent-%COMP%]   .setting-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.25rem}.setting-item[_ngcontent-%COMP%]   .setting-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#44474e;font-size:1.5rem;width:1.5rem;height:1.5rem}.setting-item[_ngcontent-%COMP%]   .setting-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.setting-item[_ngcontent-%COMP%]   .setting-text[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary)}.setting-item[_ngcontent-%COMP%]   .setting-text[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--text-secondary)}.setting-item[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{color:var(--text-secondary);opacity:.5;font-size:1.25rem}.dark-theme[_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]:hover:not(.inactive), .dark-theme   [_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]:hover:not(.inactive){background:#ffffff0d}.dark-theme[_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--text-primary)}.dark-theme[_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:var(--text-secondary)}.dark-theme[_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{color:var(--text-secondary)}.dark-theme[_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--text-primary)}.footer-msg[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);font-size:.8125rem;margin-top:2rem;opacity:.7}@media(max-width:768px){.settings-content[_ngcontent-%COMP%]{padding:1rem}}"]})};export{q as SettingsComponent};
