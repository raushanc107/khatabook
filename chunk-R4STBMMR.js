import{a as U,b as $}from"./chunk-GL7GPPQW.js";import{a as K,b as G}from"./chunk-T7NCY2CG.js";import{l as z,m as A,n as j,o as B,p as L,q as F,r as M}from"./chunk-APDNVG3J.js";import"./chunk-3VODW7RF.js";import{Ga as H,Ia as J,Ja as x,Ka as k,La as S,d as V,j as C,r as N}from"./chunk-HAXKXQNK.js";import{Ob as P,Pb as e,Qb as t,Rb as b,Xb as D,ac as d,bb as w,cc as E,db as c,ia as m,mc as I,oa as u,pa as _,pc as T,qc as n,rc as g,sb as v,sc as R,yb as y}from"./chunk-7LOXSSZQ.js";function Z(l,s){if(l&1&&(e(0,"mat-icon"),n(1),t()),l&2){let i=E();T("icon-"+(i.data.iconColor||"primary")),c(),g(i.data.icon)}}var p=class l{dialogRef=m(z);data=m(A);onClose(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=v({type:l,selectors:[["app-info-dialog"]],decls:9,vars:4,consts:[[1,"dialog-header"],[3,"class",4,"ngIf"],["mat-dialog-title",""],[3,"innerHTML"],["align","end"],["mat-raised-button","","color","primary",3,"click"]],template:function(i,o){i&1&&(e(0,"div",0),y(1,Z,2,3,"mat-icon",1),e(2,"h2",2),n(3),t()(),e(4,"mat-dialog-content"),b(5,"p",3),t(),e(6,"mat-dialog-actions",4)(7,"button",5),d("click",function(){return o.onClose()}),n(8),t()()),i&2&&(c(),P("ngIf",o.data.icon),c(2),g(o.data.title),c(2),P("innerHTML",o.data.message,w),c(3),g(o.data.buttonText||"OK"))},dependencies:[C,V,M,B,F,L,x,J,S,k],styles:[".dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:.5rem;padding:1.25rem 1.5rem 0}h2[_ngcontent-%COMP%]{margin:0}mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.icon-primary[_ngcontent-%COMP%]{color:var(--primary-color)}.icon-warn[_ngcontent-%COMP%]{color:var(--error-color)}.icon-accent[_ngcontent-%COMP%]{color:var(--accent-color)}.icon-success[_ngcontent-%COMP%]{color:var(--success-color)}mat-dialog-content[_ngcontent-%COMP%]{padding-top:1rem!important;min-width:300px;max-width:400px}p[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);line-height:1.6;white-space:pre-line}"]})};var q=class l{router=m(N);themeService=m(U);localStorageService=m($);dialog=m(j);version="1.2.0";goBack(){this.router.navigate(["/"])}exportData(){let s=this.localStorageService.getFullData(),i=JSON.stringify(s,null,2),o=new Blob([i],{type:"application/json"}),a=window.URL.createObjectURL(o),r=document.createElement("a");r.href=a,r.download=`khatabook_backup_${new Date().toISOString().split("T")[0]}.json`,r.click(),window.URL.revokeObjectURL(a)}importData(s){let i=s.target;if(!i.files||i.files.length===0)return;let o=i.files[0],a=new FileReader;a.onload=r=>{try{let f=r.target?.result,O=JSON.parse(f);if(O.customers||O.transactions){let h=this.localStorageService.importFullData(O);h.addedCustomers===0&&h.addedTransactions===0?this.dialog.open(p,{data:{title:"No New Data",message:"All items in the backup already exist in your current data.",icon:"info",iconColor:"primary"}}):this.dialog.open(p,{data:{title:"Import Successful!",message:`Added:
\u2022 ${h.addedCustomers} new customer(s)
\u2022 ${h.addedTransactions} new transaction(s)

The application will now reload to apply changes.`,icon:"check_circle",iconColor:"success"}}).afterClosed().subscribe(()=>window.location.reload())}else this.dialog.open(p,{data:{title:"Invalid File",message:"The selected file is not a valid Khatabook backup.",icon:"error",iconColor:"warn"}})}catch{this.dialog.open(p,{data:{title:"Error",message:"Failed to parse the backup file.",icon:"error",iconColor:"warn"}})}},a.readAsText(o),i.value=""}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=v({type:l,selectors:[["app-settings"]],decls:79,vars:3,consts:[["fileInput",""],[1,"settings-container"],[1,"settings-header"],["mat-icon-button","",3,"click"],[1,"settings-content"],[1,"settings-section"],[1,"section-title"],[1,"settings-card"],[1,"setting-item",3,"click"],[1,"setting-info"],[1,"setting-text"],[1,"label"],[1,"description"],[1,"chevron"],["type","file","accept",".json",2,"display","none",3,"change"],[1,"setting-item","inactive"],[1,"setting-item"],[1,"footer-msg"]],template:function(i,o){if(i&1){let a=D();e(0,"div",1)(1,"header",2)(2,"button",3),d("click",function(){return u(a),_(o.goBack())}),e(3,"mat-icon"),n(4,"arrow_back"),t()(),e(5,"h1"),n(6,"Settings"),t()(),e(7,"div",4)(8,"section",5)(9,"h2",6),n(10,"Appearance"),t(),e(11,"div",7)(12,"div",8),d("click",function(){return u(a),_(o.themeService.toggleTheme())}),e(13,"div",9)(14,"mat-icon"),n(15),t(),e(16,"div",10)(17,"span",11),n(18,"Dark Mode"),t(),e(19,"span",12),n(20),t()()(),e(21,"mat-icon",13),n(22,"chevron_right"),t()()()(),e(23,"section",5)(24,"h2",6),n(25,"Data Management"),t(),e(26,"div",7)(27,"div",8),d("click",function(){return u(a),_(o.exportData())}),e(28,"div",9)(29,"mat-icon"),n(30,"download"),t(),e(31,"div",10)(32,"span",11),n(33,"Export Backup"),t(),e(34,"span",12),n(35,"Save your data to a JSON file"),t()()(),e(36,"mat-icon",13),n(37,"chevron_right"),t()(),b(38,"mat-divider"),e(39,"div",8),d("click",function(){u(a);let f=I(51);return _(f.click())}),e(40,"div",9)(41,"mat-icon"),n(42,"upload"),t(),e(43,"div",10)(44,"span",11),n(45,"Import Backup"),t(),e(46,"span",12),n(47,"Restore data from a JSON backup"),t()()(),e(48,"mat-icon",13),n(49,"chevron_right"),t()(),e(50,"input",14,0),d("change",function(f){return u(a),_(o.importData(f))}),t()()(),e(52,"section",5)(53,"h2",6),n(54,"About"),t(),e(55,"div",7)(56,"div",15)(57,"div",9)(58,"mat-icon"),n(59,"info"),t(),e(60,"div",10)(61,"span",11),n(62,"Version"),t(),e(63,"span",12),n(64),t()()()(),b(65,"mat-divider"),e(66,"div",16)(67,"div",9)(68,"mat-icon"),n(69,"help"),t(),e(70,"div",10)(71,"span",11),n(72,"Help & Support"),t(),e(73,"span",12),n(74,"Contact us for assistance"),t()()(),e(75,"mat-icon",13),n(76,"open_in_new"),t()()()(),e(77,"div",17),n(78," Made with \u{1F496} for small businesses "),t()()()}i&2&&(c(15),g(o.themeService.currentTheme()==="dark"?"light_mode":"dark_mode"),c(5),R("Currently ",o.themeService.currentTheme()==="dark"?"Enabled":"Disabled"),c(44),g(o.version))},dependencies:[C,x,H,S,k,G,K,M],styles:[".settings-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,var(--background-color) 0%,#e0e7ff 100%);padding-bottom:3rem}body.dark-theme[_ngcontent-%COMP%]   .settings-container[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--background-color) 0%,#1e1b4b 100%)}.settings-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.5rem;background:#ffffffb3;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-bottom:1px solid rgba(255,255,255,.3);position:sticky;top:0;z-index:10}.settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:800;background:linear-gradient(to right,var(--primary-color),var(--primary-dark));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:-.02em}.settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ffffff80;border:1px solid rgba(255,255,255,.8);border-radius:12px}body.dark-theme[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]{background:#1e1e1eb3;border-bottom:1px solid rgba(255,255,255,.1)}body.dark-theme[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{background:linear-gradient(to right,var(--primary-light),#c7d2fe);-webkit-background-clip:text;background-clip:text}body.dark-theme[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ffffff0d;border-color:#ffffff1a}.settings-content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:1.5rem}.settings-section[_ngcontent-%COMP%]{margin-bottom:2rem}.settings-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:.8125rem;font-weight:700;text-transform:uppercase;letter-spacing:.1em;color:var(--text-secondary);margin:0 0 .75rem 1rem}.settings-card[_ngcontent-%COMP%]{background:#fff9;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border:1px solid rgba(255,255,255,.4);border-radius:20px;box-shadow:0 8px 32px #1f268712;overflow:hidden}body.dark-theme[_ngcontent-%COMP%]   .settings-card[_ngcontent-%COMP%]{background:#1e1e1e99;border:1px solid rgba(255,255,255,.05)}.setting-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.25rem 1.5rem;cursor:pointer;transition:all .2s ease}.setting-item[_ngcontent-%COMP%]:hover:not(.inactive){background:#fff6}.setting-item.inactive[_ngcontent-%COMP%]{cursor:default}.setting-item[_ngcontent-%COMP%]   .setting-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.25rem}.setting-item[_ngcontent-%COMP%]   .setting-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.5rem;width:1.5rem;height:1.5rem}.setting-item[_ngcontent-%COMP%]   .setting-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.setting-item[_ngcontent-%COMP%]   .setting-text[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary)}.setting-item[_ngcontent-%COMP%]   .setting-text[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--text-secondary)}.setting-item[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{color:var(--text-secondary);opacity:.5;font-size:1.25rem}body.dark-theme[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]:hover:not(.inactive){background:#ffffff0d}.footer-msg[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);font-size:.8125rem;margin-top:2rem;opacity:.7}@media(max-width:768px){.settings-content[_ngcontent-%COMP%]{padding:1rem}}"]})};export{q as SettingsComponent};
