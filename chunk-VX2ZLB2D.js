import{a as E}from"./chunk-BBXHLK6T.js";import{a as G,b as W}from"./chunk-T7NCY2CG.js";import{l as k,m as H,n as J,o as S,p as y,q as w,r as M}from"./chunk-APDNVG3J.js";import{a as K}from"./chunk-RCBGXLN4.js";import"./chunk-3VODW7RF.js";import{Ga as $,Ia as D,Ja as v,Ka as x,La as O,d as A,j as C,r as U}from"./chunk-HAXKXQNK.js";import{Ob as I,Pb as t,Qb as e,Rb as b,Xb as j,ac as c,bb as F,cc as B,db as d,ia as m,mc as L,oa as g,pa as p,pc as N,qc as n,rc as f,sb as h,sc as z,yb as V}from"./chunk-7LOXSSZQ.js";function et(s,l){if(s&1&&(t(0,"mat-icon"),n(1),e()),s&2){let i=B();N("icon-"+(i.data.iconColor||"primary")),d(),f(i.data.icon)}}var _=class s{dialogRef=m(k);data=m(H);onClose(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=h({type:s,selectors:[["app-info-dialog"]],decls:9,vars:4,consts:[[1,"dialog-header"],[3,"class",4,"ngIf"],["mat-dialog-title",""],[3,"innerHTML"],["align","end"],["mat-raised-button","","color","primary",3,"click"]],template:function(i,o){i&1&&(t(0,"div",0),V(1,et,2,3,"mat-icon",1),t(2,"h2",2),n(3),e()(),t(4,"mat-dialog-content"),b(5,"p",3),e(),t(6,"mat-dialog-actions",4)(7,"button",5),c("click",function(){return o.onClose()}),n(8),e()()),i&2&&(d(),I("ngIf",o.data.icon),d(2),f(o.data.title),d(2),I("innerHTML",o.data.message,F),d(3),f(o.data.buttonText||"OK"))},dependencies:[C,A,M,S,w,y,v,D,O,x],styles:[".dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:.5rem;padding:1.25rem 1.5rem 0}h2[_ngcontent-%COMP%]{margin:0}mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.icon-primary[_ngcontent-%COMP%]{color:var(--primary-color)}.icon-warn[_ngcontent-%COMP%]{color:var(--error-color)}.icon-accent[_ngcontent-%COMP%]{color:var(--accent-color)}.icon-success[_ngcontent-%COMP%]{color:var(--success-color)}mat-dialog-content[_ngcontent-%COMP%]{padding-top:1rem!important;min-width:300px;max-width:400px}p[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);line-height:1.6;white-space:pre-line}"]})};var R=class s{dialogRef=m(k);localStorageService=m(E);onCancel(){this.dialogRef.close()}onBackup(){let l=this.localStorageService.getFullData(),i=JSON.stringify(l,null,2),o=new Blob([i],{type:"application/json"}),r=window.URL.createObjectURL(o),a=document.createElement("a");a.href=r,a.download=`khatabook_backup_${new Date().toISOString().split("T")[0]}.json`,a.click(),window.URL.revokeObjectURL(r)}onReset(){this.dialogRef.close("reset")}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=h({type:s,selectors:[["app-factory-reset-dialog"]],decls:22,vars:0,consts:[[1,"dialog-header"],[1,"icon-warn"],["mat-dialog-title",""],[1,"warning-text"],["align","end",1,"dialog-actions"],["mat-button","",3,"click"],["mat-stroked-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(i,o){i&1&&(t(0,"div",0)(1,"mat-icon",1),n(2,"warning"),e(),t(3,"h2",2),n(4,"Factory Reset"),e()(),t(5,"mat-dialog-content")(6,"p",3),n(7," This will "),t(8,"strong"),n(9,"permanently delete"),e(),n(10," all your customers and transactions. This action cannot be undone. "),e(),t(11,"p"),n(12," We strongly recommend backing up your data before proceeding. "),e()(),t(13,"mat-dialog-actions",4)(14,"button",5),c("click",function(){return o.onCancel()}),n(15,"Cancel"),e(),t(16,"button",6),c("click",function(){return o.onBackup()}),t(17,"mat-icon"),n(18,"download"),e(),n(19," Backup Data "),e(),t(20,"button",7),c("click",function(){return o.onReset()}),n(21," Reset Everything "),e()())},dependencies:[C,M,S,w,y,v,D,O,x],styles:[".dialog-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:.5rem;padding:1.25rem 1.5rem 0}h2[_ngcontent-%COMP%]{margin:0}mat-icon.icon-warn[_ngcontent-%COMP%]{color:var(--error-color);font-size:32px;width:32px;height:32px}mat-dialog-content[_ngcontent-%COMP%]{padding-top:1rem!important;min-width:320px;max-width:450px}p[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--text-secondary);line-height:1.6}.warning-text[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:.5rem}strong[_ngcontent-%COMP%]{color:var(--error-color);font-weight:600}.dialog-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;padding-bottom:1.25rem;padding-right:1.5rem}@media(max-width:480px){.dialog-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}button[_ngcontent-%COMP%]{width:100%;margin-left:0!important}}"]})};var Y=class s{router=m(U);themeService=m(K);localStorageService=m(E);dialog=m(J);version="1.2.0";goBack(){this.router.navigate(["/"])}goToReports(){this.router.navigate(["/reports"])}exportData(){let l=this.localStorageService.getFullData(),i=JSON.stringify(l,null,2),o=new Blob([i],{type:"application/json"}),r=window.URL.createObjectURL(o),a=document.createElement("a");a.href=r,a.download=`khatabook_backup_${new Date().toISOString().split("T")[0]}.json`,a.click(),window.URL.revokeObjectURL(r)}importData(l){let i=l.target;if(!i.files||i.files.length===0)return;let o=i.files[0],r=new FileReader;r.onload=a=>{try{let u=a.target?.result,T=JSON.parse(u);if(T.customers||T.transactions){let P=this.localStorageService.importFullData(T);P.addedCustomers===0&&P.addedTransactions===0?this.dialog.open(_,{data:{title:"No New Data",message:"All items in the backup already exist in your current data.",icon:"info",iconColor:"primary"}}):this.dialog.open(_,{data:{title:"Import Successful!",message:`Added:
\u2022 ${P.addedCustomers} new customer(s)
\u2022 ${P.addedTransactions} new transaction(s)

The application will now reload to apply changes.`,icon:"check_circle",iconColor:"success"}}).afterClosed().subscribe(()=>window.location.reload())}else this.dialog.open(_,{data:{title:"Invalid File",message:"The selected file is not a valid Khatabook backup.",icon:"error",iconColor:"warn"}})}catch{this.dialog.open(_,{data:{title:"Error",message:"Failed to parse the backup file.",icon:"error",iconColor:"warn"}})}},r.readAsText(o),i.value=""}factoryReset(){this.dialog.open(R).afterClosed().subscribe(i=>{i==="reset"&&(this.localStorageService.clearData(),window.location.reload())})}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=h({type:s,selectors:[["app-settings"]],decls:109,vars:3,consts:[["fileInput",""],[1,"settings-container"],[1,"settings-header"],["mat-icon-button","",3,"click"],[1,"settings-content"],[1,"settings-section"],[1,"section-title"],[1,"settings-card"],[1,"setting-item",3,"click"],[1,"setting-info"],[1,"setting-text"],[1,"label"],[1,"description"],[1,"chevron"],["type","file","accept",".json",2,"display","none",3,"change"],[1,"section-title","text-danger"],[1,"settings-card","danger-card"],["color","warn"],[1,"label","text-danger"],[1,"setting-item","inactive"],[1,"setting-item"],[1,"footer-msg"]],template:function(i,o){if(i&1){let r=j();t(0,"div",1)(1,"header",2)(2,"button",3),c("click",function(){return g(r),p(o.goBack())}),t(3,"mat-icon"),n(4,"arrow_back"),e()(),t(5,"h1"),n(6,"Settings"),e()(),t(7,"div",4)(8,"section",5)(9,"h2",6),n(10,"Appearance"),e(),t(11,"div",7)(12,"div",8),c("click",function(){return g(r),p(o.themeService.toggleTheme())}),t(13,"div",9)(14,"mat-icon"),n(15),e(),t(16,"div",10)(17,"span",11),n(18,"Dark Mode"),e(),t(19,"span",12),n(20),e()()(),t(21,"mat-icon",13),n(22,"chevron_right"),e()()()(),t(23,"section",5)(24,"h2",6),n(25,"Analytics"),e(),t(26,"div",7)(27,"div",8),c("click",function(){return g(r),p(o.goToReports())}),t(28,"div",9)(29,"mat-icon"),n(30,"bar_chart"),e(),t(31,"div",10)(32,"span",11),n(33,"Reports & Insights"),e(),t(34,"span",12),n(35,"View financial metrics and trends"),e()()(),t(36,"mat-icon",13),n(37,"chevron_right"),e()()()(),t(38,"section",5)(39,"h2",6),n(40,"Data Management"),e(),t(41,"div",7)(42,"div",8),c("click",function(){return g(r),p(o.exportData())}),t(43,"div",9)(44,"mat-icon"),n(45,"download"),e(),t(46,"div",10)(47,"span",11),n(48,"Export Backup"),e(),t(49,"span",12),n(50,"Save your data to a JSON file"),e()()(),t(51,"mat-icon",13),n(52,"chevron_right"),e()(),b(53,"mat-divider"),t(54,"div",8),c("click",function(){g(r);let u=L(66);return p(u.click())}),t(55,"div",9)(56,"mat-icon"),n(57,"upload"),e(),t(58,"div",10)(59,"span",11),n(60,"Import Backup"),e(),t(61,"span",12),n(62,"Restore data from a JSON backup"),e()()(),t(63,"mat-icon",13),n(64,"chevron_right"),e()(),t(65,"input",14,0),c("change",function(u){return g(r),p(o.importData(u))}),e()()(),t(67,"section",5)(68,"h2",15),n(69,"Danger Zone"),e(),t(70,"div",16)(71,"div",8),c("click",function(){return g(r),p(o.factoryReset())}),t(72,"div",9)(73,"mat-icon",17),n(74,"delete_forever"),e(),t(75,"div",10)(76,"span",18),n(77,"Factory Reset"),e(),t(78,"span",12),n(79,"Permanently clear all data"),e()()(),t(80,"mat-icon",13),n(81,"chevron_right"),e()()()(),t(82,"section",5)(83,"h2",6),n(84,"About"),e(),t(85,"div",7)(86,"div",19)(87,"div",9)(88,"mat-icon"),n(89,"info"),e(),t(90,"div",10)(91,"span",11),n(92,"Version"),e(),t(93,"span",12),n(94),e()()()(),b(95,"mat-divider"),t(96,"div",20)(97,"div",9)(98,"mat-icon"),n(99,"help"),e(),t(100,"div",10)(101,"span",11),n(102,"Help & Support"),e(),t(103,"span",12),n(104,"Contact us for assistance"),e()()(),t(105,"mat-icon",13),n(106,"open_in_new"),e()()()(),t(107,"div",21),n(108," Made with \u{1F496} for small businesses "),e()()()}i&2&&(d(15),f(o.themeService.currentTheme()==="dark"?"light_mode":"dark_mode"),d(5),z("Currently ",o.themeService.currentTheme()==="dark"?"Enabled":"Disabled"),d(74),f(o.version))},dependencies:[C,v,$,O,x,W,G,M],styles:[".settings-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f8fafc,#eef2ff);padding-bottom:3rem}[_nghost-%COMP%]{display:block;background-color:var(--background-color);min-height:100vh}.text-danger[_ngcontent-%COMP%]{color:var(--error-color)!important}.danger-card[_ngcontent-%COMP%]{border:1px solid rgba(var(--error-color-rgb),.2)}.danger-card[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]:hover{background-color:rgba(var(--error-color-rgb),.05)}.dark-theme[_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .settings-container[_ngcontent-%COMP%]{background:var(--background-color)}.settings-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.75rem 1rem;height:60px;box-sizing:border-box;background:var(--surface-color);border-bottom:1px solid var(--border-color);position:sticky;top:0;z-index:10}.settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:var(--primary-color);background:none;-webkit-background-clip:unset;background-clip:unset;-webkit-text-fill-color:initial}.settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;border-radius:50%;color:var(--text-primary);padding:8px}.settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--hover-bg)}.dark-theme[_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%]{background:var(--surface-color);border-bottom:1px solid var(--border-color)}.dark-theme[_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary-color)}.dark-theme[_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .settings-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-color:var(--border-color);color:var(--text-primary)}.settings-content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:1.5rem}.settings-section[_ngcontent-%COMP%]{margin-bottom:2rem}.settings-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:.8125rem;font-weight:700;text-transform:uppercase;letter-spacing:.1em;color:var(--text-secondary);margin:0 0 .75rem 1rem}.dark-theme[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{color:var(--text-secondary)}.settings-card[_ngcontent-%COMP%]{background:#fff9;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border:1px solid rgba(255,255,255,.4);border-radius:20px;box-shadow:0 8px 32px #1f268712;overflow:hidden}.dark-theme[_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .settings-card[_ngcontent-%COMP%]{background:var(--surface-color);border:1px solid rgba(255,255,255,.1);box-shadow:0 8px 32px #0000004d}.setting-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.25rem 1.5rem;cursor:pointer;transition:all .2s ease}.setting-item[_ngcontent-%COMP%]:hover:not(.inactive){background:#fff6}.setting-item.inactive[_ngcontent-%COMP%]{cursor:default}.setting-item[_ngcontent-%COMP%]   .setting-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.25rem}.setting-item[_ngcontent-%COMP%]   .setting-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#44474e;font-size:1.5rem;width:1.5rem;height:1.5rem}.setting-item[_ngcontent-%COMP%]   .setting-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.setting-item[_ngcontent-%COMP%]   .setting-text[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary)}.setting-item[_ngcontent-%COMP%]   .setting-text[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--text-secondary)}.setting-item[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{color:var(--text-secondary);opacity:.5;font-size:1.25rem}.dark-theme[_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]:hover:not(.inactive), .dark-theme   [_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]:hover:not(.inactive){background:#ffffff0d}.dark-theme[_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--text-primary)}.dark-theme[_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:var(--text-secondary)}.dark-theme[_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{color:var(--text-secondary)}.dark-theme[_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .setting-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--text-primary)}.footer-msg[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);font-size:.8125rem;margin-top:2rem;opacity:.7}@media(max-width:768px){.settings-content[_ngcontent-%COMP%]{padding:1rem}}"]})};export{Y as SettingsComponent};
