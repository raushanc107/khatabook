import{$a as On,A as H,B as ln,Ba as hn,Cb as zn,D as dn,Fa as gn,G as un,H as pn,Ja as vn,K as mn,Ma as yn,N as fn,Wa as bn,Xa as Pe,Ya as Cn,Za as En,_a as Ae,ab as Sn,b as Wt,bb as ke,c as Me,cb as Mn,d as Ht,db as _n,e as Yt,eb as qe,f as Zt,fb as Tn,g as Jt,gb as xn,h as _e,hb as wn,i as Xt,ib as In,j as qt,jb as Pn,kb as An,l as Te,lb as kn,m as xe,n as Qt,o as en,ob as Rn,p as tn,pb as Dn,q as Je,qb as Fn,r as we,rb as Nn,s as nn,sb as jn,t as on,tb as Ln,u as rn,ub as Bn,v as sn,vb as Un,w as an,wb as $n,x as Xe,xb as Kn,y as Ie,z as cn}from"./chunk-BYVUPMJ7.js";import{$ as U,$a as M,A as I,Aa as Oe,Ab as Kt,Ac as Ze,Ba as Ft,C as Z,Cb as Ye,D as Ot,Da as Nt,E as St,F as L,G as Mt,H as ue,Ha as jt,I as _t,Ib as J,Jb as p,K as Tt,Kb as g,Lb as W,N as We,Oa as Lt,P as xt,Pb as Se,S as wt,T as It,Tb as re,V as Pt,Vb as zt,W as At,X as V,Y as ge,Z as He,_ as te,a as w,aa as kt,b as Y,ca as _,db as Bt,dc as Vt,f as B,fa as D,fc as ie,g as q,ga as S,gb as Ut,ha as d,hc as C,i as gt,ia as G,ic as se,j as vt,ja as Rt,jb as $t,jc as X,k as yt,l as bt,n as R,na as ve,oa as ye,ob as oe,pc as P,qc as A,r as Ct,ra as be,rc as Gt,s as b,sa as Ce,t as Et,u as Q,ub as pe,wa as ne,xa as Ee,y as ee,z,za as Dt}from"./chunk-4IWQKCYR.js";var Io="@",Po=(()=>{class t{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=d(be);loadingSchedulerFn=d(Ao,{optional:!0});_engine;constructor(e,o,r,i,a){this.doc=e,this.delegate=o,this.zone=r,this.animationType=i,this.moduleImpl=a}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-RM6PHFPK.js").then(r=>r),o;return this.loadingSchedulerFn?o=this.loadingSchedulerFn(e):o=e(),o.catch(r=>{throw new U(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:i})=>{this._engine=r(this.animationType,this.doc);let a=new i(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(e,o){let r=this.delegate.createRenderer(e,o);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let i=new Qe(r);return o?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(e,o);i.use(l),this.scheduler??=this.injector.get(Ft,null,{optional:!0}),this.scheduler?.notify(10)}).catch(a=>{i.use(r)}),i}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(o){$t()};static \u0275prov=_({token:t,factory:t.\u0275fac})}return t})(),Qe=class{delegate;replay=[];\u0275type=1;constructor(n){this.delegate=n}use(n){if(this.delegate=n,this.replay!==null){for(let e of this.replay)e(n);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}get destroyNode(){return this.delegate.destroyNode}appendChild(n,e){this.delegate.appendChild(n,e)}insertBefore(n,e,o,r){this.delegate.insertBefore(n,e,o,r)}removeChild(n,e,o,r){this.delegate.removeChild(n,e,o,r)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,o,r){this.delegate.setAttribute(n,e,o,r)}removeAttribute(n,e,o){this.delegate.removeAttribute(n,e,o)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,o,r){this.delegate.setStyle(n,e,o,r)}removeStyle(n,e,o){this.delegate.removeStyle(n,e,o)}setProperty(n,e,o){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(n,e,o)),this.delegate.setProperty(n,e,o)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,o,r){return this.shouldReplay(e)&&this.replay.push(i=>i.listen(n,e,o,r)),this.delegate.listen(n,e,o,r)}shouldReplay(n){return this.replay!==null&&n.startsWith(Io)}},Ao=new D("");function Vn(t="animations"){return Bt("NgAsyncAnimations"),G([{provide:Ut,useFactory:()=>new Po(d(Ce),d(Xt),d(ne),t)},{provide:Lt,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}function Fo(t,n){if(t&1){let e=Se();p(0,"div",16),re("click",function(){let r=ve(e).$implicit,i=zt();return ye(i.viewCustomer(r.id))}),p(1,"div",17),C(2),P(3,"uppercase"),g(),p(4,"div",18)(5,"h3",19),C(6),g(),p(7,"span",20),C(8),P(9,"date"),g()(),p(10,"div",21)(11,"span",4),C(12),P(13,"number"),g(),p(14,"span",22),C(15),g()()()}if(t&2){let e=n.$implicit;M(2),X(" ",A(3,9,e.name.charAt(0))," "),M(4),se(e.name),M(2),se(Gt(9,11,e.lastUpdated,"mediumDate")),M(2),ie("positive",e.currentBalance>=0)("negative",e.currentBalance<0),M(2),X("\u20B9",A(13,14,e.currentBalance)),M(3),se(e.currentBalance>=0?"You will get":"You will give")}}function No(t,n){t&1&&(p(0,"div",23)(1,"p"),C(2,"No customers yet. Add one to start!"),g()())}var Re=class t{store=d(H);dialog=d(hn);router=d(xe);searchControl=new pn("");customers$=Et([this.store.select(Rn),this.searchControl.valueChanges.pipe(At(""))]).pipe(b(([n,e])=>{let o=(e||"").toLowerCase();return n.filter(r=>r.name.toLowerCase().includes(o)||r.phoneNumber.includes(o)).sort((r,i)=>new Date(i.lastUpdated).getTime()-new Date(r.lastUpdated).getTime())}));totalToGet$=this.store.select(Dn);totalToGive$=this.store.select(Fn);netBalance$=this.store.select(Nn);ngOnInit(){this.store.dispatch(Pe()),this.store.dispatch(ke())}addCustomer(){this.dialog.open(bn,{width:"300px"}).afterClosed().subscribe(e=>{if(e&&e.name){let o={id:crypto.randomUUID(),name:e.name,phoneNumber:e.phoneNumber||"",currentBalance:0,lastUpdated:new Date().toISOString()};this.store.dispatch(Ae({customer:o}))}})}viewCustomer(n){this.router.navigate(["customer",n])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=oe({type:t,selectors:[["app-customer-list"]],decls:39,vars:29,consts:[[1,"list-container"],[1,"summary-cards"],[1,"card","summary-card","green"],[1,"label"],[1,"amount"],[1,"card","summary-card","red"],[1,"card","summary-card","blue"],[1,"search-bar"],["type","text","placeholder","Search Customer...",1,"search-input",3,"formControl"],[1,"customer-list-content"],[1,"list-header"],[1,"btn","btn-primary","btn-sm","desktop-only",3,"click"],[1,"customers"],["class","customer-item card",3,"click",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"fab",3,"click"],[1,"customer-item","card",3,"click"],[1,"customer-avatar"],[1,"customer-info"],[1,"customer-name"],[1,"last-updated"],[1,"customer-balance"],[1,"status"],[1,"empty-state"]],template:function(e,o){if(e&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),C(4,"You will get"),g(),p(5,"span",4),C(6),P(7,"async"),g()(),p(8,"div",5)(9,"span",3),C(10,"You will give"),g(),p(11,"span",4),C(12),P(13,"async"),g()(),p(14,"div",6)(15,"span",3),C(16,"Net Balance"),g(),p(17,"span",4),P(18,"async"),P(19,"async"),C(20),P(21,"async"),P(22,"number"),g()()(),p(23,"div",7),W(24,"input",8),g(),p(25,"div",9)(26,"div",10)(27,"span"),C(28),P(29,"async"),g(),p(30,"button",11),re("click",function(){return o.addCustomer()}),C(31,"+ Add Customer"),g()(),p(32,"div",12),pe(33,Fo,16,16,"div",13),P(34,"async"),pe(35,No,3,0,"div",14),P(36,"async"),g()(),p(37,"button",15),re("click",function(){return o.addCustomer()}),C(38,"+"),g()()),e&2){let r,i;M(6),X("\u20B9",A(7,11,o.totalToGet$)),M(6),X("\u20B9",A(13,13,o.totalToGive$)),M(5),ie("positive",A(18,15,o.netBalance$)>=0)("negative",A(19,17,o.netBalance$)<0),M(3),X(" \u20B9",A(22,21,A(21,19,o.netBalance$))," "),M(4),J("formControl",o.searchControl),M(4),X("",(r=A(29,23,o.customers$))==null?null:r.length," Customers"),M(5),J("ngForOf",A(34,25,o.customers$)),M(2),J("ngIf",((i=A(36,27,o.customers$))==null?null:i.length)===0)}},dependencies:[_e,Wt,Me,gn,fn,dn,un,mn,Ht,Yt,Jt,Zt],styles:[".list-container[_ngcontent-%COMP%]{padding:1rem;height:100%;overflow-y:auto;background-color:var(--background-color)}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:1rem;margin-bottom:1.5rem}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:1rem}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase;color:var(--text-secondary);margin-bottom:.25rem}.summary-cards[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700}.summary-cards[_ngcontent-%COMP%]   .summary-card.green[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:var(--success-color)}.summary-cards[_ngcontent-%COMP%]   .summary-card.red[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:var(--danger-color)}.summary-cards[_ngcontent-%COMP%]   .summary-card.blue[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:var(--primary-color)}.summary-cards[_ngcontent-%COMP%]   .summary-card.blue[_ngcontent-%COMP%]   .amount.negative[_ngcontent-%COMP%]{color:var(--danger-color)}.search-bar[_ngcontent-%COMP%]{margin-bottom:1rem}.search-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid var(--border-color);border-radius:.5rem;font-size:1rem;box-sizing:border-box}.search-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px var(--primary-light)}.customer-list-content[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;color:var(--text-secondary);font-size:.875rem}.customer-list-content[_ngcontent-%COMP%]   .customers[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;padding-bottom:80px}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;cursor:pointer;transition:transform .1s,background-color .2s}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]:hover{background-color:var(--hover-bg)}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]:active{transform:scale(.99)}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-avatar[_ngcontent-%COMP%]{width:40px;height:40px;background-color:var(--primary-light);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;margin-right:1rem;flex-shrink:0}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]{flex:1;min-width:0}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .last-updated[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary)}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-balance[_ngcontent-%COMP%]{text-align:right;display:flex;flex-direction:column;flex-shrink:0}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-balance[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:600;font-size:1rem}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-balance[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-size:.65rem;color:var(--text-secondary)}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-balance.positive[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:var(--success-color)}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-balance.negative[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:var(--danger-color)}.fab[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;width:56px;height:56px;border-radius:50%;background-color:var(--primary-color);color:#fff;font-size:2rem;border:none;box-shadow:var(--shadow-lg);display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:100}.fab[_ngcontent-%COMP%]:hover{background-color:var(--primary-dark);transform:scale(1.05)}@media(min-width:768px){.fab[_ngcontent-%COMP%]{display:none}}.desktop-only[_ngcontent-%COMP%]{display:none}@media(min-width:768px){.desktop-only[_ngcontent-%COMP%]{display:inline-flex}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:var(--text-secondary)}"]})};var De=class t{document=d(Ce);currentTheme=Oe("system");constructor(){let n=localStorage.getItem("theme");n&&this.currentTheme.set(n),Nt(()=>{let o=this.currentTheme();this.applyTheme(o),localStorage.setItem("theme",o)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{this.currentTheme()==="system"&&this.applyTheme("system")})}toggleTheme(){let n=this.currentTheme();if(n==="light")this.currentTheme.set("dark");else if(n==="dark")this.currentTheme.set("light");else{let e=window.matchMedia("(prefers-color-scheme: dark)").matches;this.currentTheme.set(e?"light":"dark")}}setTheme(n){this.currentTheme.set(n)}applyTheme(n){let e=this.document.body;if(e.classList.remove("light-theme","dark-theme"),n==="system"){let o=window.matchMedia("(prefers-color-scheme: dark)").matches;e.classList.add(o?"dark-theme":"light-theme")}else e.classList.add(`${n}-theme`)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})};function jo(t,n){t&1&&(p(0,"div",13)(1,"div",14)(2,"span",15),C(3,"receipt_long"),g(),p(4,"h2"),C(5,"Select a Customer"),g(),p(6,"p"),C(7,"Click on a customer to view their transactions."),g()()())}var Fe=class t{router=d(xe);themeService=d(De);get showListOnMobile(){return this.router.url==="/"}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=oe({type:t,selectors:[["app-dashboard"]],decls:24,vars:7,consts:[["settingsMenu","matMenu"],[1,"app-layout"],[1,"app-header"],[1,"container"],[1,"brand"],["src","icons/icon-192x192.png","alt","Logo",1,"app-logo"],[1,"actions"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"split-pane","container"],[1,"sidebar"],[1,"main-content"],["class","placeholder-content",4,"ngIf"],[1,"placeholder-content"],[1,"placeholder-msg"],[1,"material-icons","big-icon"]],template:function(e,o){if(e&1){let r=Se();p(0,"div",1)(1,"header",2)(2,"div",3)(3,"div",4),W(4,"img",5),p(5,"h1"),C(6,"Khatabook"),g()(),p(7,"div",6)(8,"button",7)(9,"mat-icon"),C(10,"settings"),g()(),p(11,"mat-menu",null,0)(13,"button",8),re("click",function(){return ve(r),ye(o.themeService.toggleTheme())}),p(14,"mat-icon"),C(15),g(),p(16,"span"),C(17,"Toggle Theme"),g()()()()()(),p(18,"div",9)(19,"div",10),W(20,"app-customer-list"),g(),p(21,"div",11),W(22,"router-outlet"),pe(23,jo,8,0,"div",12),g()()()}if(e&2){let r=Vt(12);M(8),J("matMenuTriggerFor",r),M(7),se(o.themeService.currentTheme()==="dark"?"light_mode":"dark_mode"),M(4),ie("mobile-hidden",!o.showListOnMobile),M(2),ie("mobile-hidden",o.showListOnMobile),M(2),J("ngIf",o.router.url==="/")}},dependencies:[_e,Me,Te,Re,Un,Ln,jn,Bn,Kn,$n,yn,vn],styles:[".app-layout[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;overflow:hidden;background-color:var(--background-color)}.app-header[_ngcontent-%COMP%]{background:var(--surface-color);border-bottom:1px solid var(--border-color);flex-shrink:0;padding:.75rem 1rem;height:60px;box-sizing:border-box}.app-header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.app-header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.app-header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   .app-logo[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:6px;box-shadow:0 2px 4px #0000001a}.app-header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:var(--primary-color)}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:var(--primary-color)}.split-pane[_ngcontent-%COMP%]{flex:1;display:flex;overflow:hidden;padding:0;max-width:100%!important;margin:0}@media(min-width:768px){.split-pane[_ngcontent-%COMP%]{max-width:1200px!important;margin:0 auto;padding:1rem;gap:1rem}}.sidebar[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff}@media(min-width:768px){.sidebar[_ngcontent-%COMP%]{width:350px;border-radius:.5rem;border:1px solid var(--border-color);box-shadow:var(--shadow-sm);flex-shrink:0}}.main-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff;display:flex;flex-direction:column}@media(min-width:768px){.main-content[_ngcontent-%COMP%]{flex:1;border-radius:.5rem;border:1px solid var(--border-color);box-shadow:var(--shadow-sm);overflow:hidden}}@media(max-width:767px){.mobile-hidden[_ngcontent-%COMP%]{display:none!important}}.placeholder-content[_ngcontent-%COMP%]{display:none}@media(min-width:768px){.placeholder-content[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;align-items:center;justify-content:center;color:var(--text-secondary);text-align:center}.placeholder-content[_ngcontent-%COMP%]   .big-icon[_ngcontent-%COMP%]{font-size:4rem;color:var(--primary-light);margin-bottom:1rem;opacity:.5}.placeholder-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:.5rem}}"]})};var Wn=[{path:"",component:Fe,children:[{path:"customer/:id",loadComponent:()=>import("./chunk-5KYWDOHL.js").then(t=>t.CustomerLedgerComponent)}]}];var et="Service workers are disabled or not supported by this browser",ae=class{serviceWorker;worker;registration;events;constructor(n,e){if(this.serviceWorker=n,!n)this.worker=this.events=this.registration=new B(o=>o.error(new U(5601,!1)));else{let o=null,r=new q;this.worker=new B(s=>(o!==null&&s.next(o),r.subscribe(v=>s.next(v))));let i=()=>{let{controller:s}=n;s!==null&&(o=s,r.next(o))};n.addEventListener("controllerchange",i),i(),this.registration=this.worker.pipe(V(()=>n.getRegistration().then(s=>{if(!s)throw new U(5601,!1);return s})));let a=new q;this.events=a.asObservable();let l=s=>{let{data:v}=s;v?.type&&a.next(v)};n.addEventListener("message",l),e?.get(Ye,null,{optional:!0})?.onDestroy(()=>{n.removeEventListener("controllerchange",i),n.removeEventListener("message",l)})}}postMessage(n,e){return new Promise(o=>{this.worker.pipe(L(1)).subscribe(r=>{r.postMessage(w({action:n},e)),o()})})}postMessageWithOperation(n,e,o){let r=this.waitForOperationCompleted(o),i=this.postMessage(n,e);return Promise.all([i,r]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(n){let e;return typeof n=="string"?e=o=>o.type===n:e=o=>n.includes(o.type),this.events.pipe(I(e))}nextEventOfType(n){return this.eventsOfType(n).pipe(L(1))}waitForOperationCompleted(n){return new Promise((e,o)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(I(r=>r.nonce===n),L(1),b(r=>{if(r.result!==void 0)return r.result;throw new Error(r.error)})).subscribe({next:e,error:o})})}get isEnabled(){return!!this.serviceWorker}},Lo=(()=>{class t{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new q;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=z,this.notificationClicks=z,this.notificationCloses=z,this.pushSubscriptionChanges=z,this.subscription=z;return}this.messages=this.sw.eventsOfType("PUSH").pipe(b(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(b(r=>r.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(b(r=>r.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(b(r=>r.data)),this.pushManager=this.sw.registration.pipe(b(r=>r.pushManager));let o=this.pushManager.pipe(V(r=>r.getSubscription()));this.subscription=new B(r=>{let i=o.subscribe(r),a=this.subscriptionChanges.subscribe(r);return()=>{i.unsubscribe(),a.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(et));let o={userVisibleOnly:!0},r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),i=new Uint8Array(new ArrayBuffer(r.length));for(let a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return o.applicationServerKey=i,new Promise((a,l)=>{this.pushManager.pipe(V(f=>f.subscribe(o)),L(1)).subscribe({next:f=>{this.subscriptionChanges.next(f),a(f)},error:l})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(et));let e=o=>{if(o===null)throw new U(5602,!1);return o.unsubscribe().then(r=>{if(!r)throw new U(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((o,r)=>{this.subscription.pipe(L(1),V(e)).subscribe({next:o,error:r})})}decodeBase64(e){return atob(e)}static \u0275fac=function(o){return new(o||t)(S(ae))};static \u0275prov=_({token:t,factory:t.\u0275fac})}return t})(),Bo=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=z,this.unrecoverable=z;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(et));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let e=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new U(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(o){return new(o||t)(S(ae))};static \u0275prov=_({token:t,factory:t.\u0275fac})}return t})(),Jn=new D("");function Uo(){let t=d(me);if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let n=d(Jn),e=d(ne),o=d(Ye);e.runOutsideAngular(()=>{let r=navigator.serviceWorker,i=()=>r.controller?.postMessage({action:"INITIALIZE"});r.addEventListener("controllerchange",i),o.onDestroy(()=>{r.removeEventListener("controllerchange",i)})}),e.runOutsideAngular(()=>{let r,{registrationStrategy:i}=t;if(typeof i=="function")r=new Promise(a=>i().subscribe(()=>a()));else{let[a,...l]=(i||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":r=Promise.resolve();break;case"registerWithDelay":r=Hn(+l[0]||0);break;case"registerWhenStable":r=Promise.race([o.whenStable(),Hn(+l[0])]);break;default:throw new U(5600,!1)}}r.then(()=>{o.destroyed||navigator.serviceWorker.register(n,{scope:t.scope,updateViaCache:t.updateViaCache,type:t.type}).catch(a=>console.error(kt(5604,!1)))})})}function Hn(t){return new Promise(n=>setTimeout(n,t))}function $o(){let t=d(me),n=d(be),e=!0;return new ae(e&&t.enabled!==!1?navigator.serviceWorker:void 0,n)}var me=class{enabled;updateViaCache;type;scope;registrationStrategy};function Xn(t,n={}){return G([Lo,Bo,{provide:Jn,useValue:t},{provide:me,useValue:n},{provide:ae,useFactory:$o},Kt(Uo)])}var zo={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},Ne="__@ngrx/effects_create__";function ce(t,n={}){let e=n.functional?t:t(),o=w(w({},zo),n);return Object.defineProperty(e,Ne,{value:o}),e}function Vo(t){return Object.getOwnPropertyNames(t).filter(o=>t[o]&&t[o].hasOwnProperty(Ne)?t[o][Ne].hasOwnProperty("dispatch"):!1).map(o=>{let r=t[o][Ne];return w({propertyName:o},r)})}function Go(t){return Vo(t)}function qn(t){return Object.getPrototypeOf(t)}function Wo(t){return!!t.constructor&&t.constructor.name!=="Object"&&t.constructor.name!=="Function"}function Qn(t){return typeof t=="function"}function Ho(t){return t.filter(Qn)}function Yo(t,n,e){let o=qn(t),i=!!o&&o.constructor.name!=="Object"?o.constructor.name:null,a=Go(t).map(({propertyName:l,dispatch:f,useEffectsErrorHandler:s})=>{let v=typeof t[l]=="function"?t[l]():t[l],c=s?e(v,n):v;return f===!1?c.pipe(Mt()):c.pipe(xt()).pipe(b(T=>({effect:t[l],notification:T,propertyName:l,sourceName:i,sourceInstance:t})))});return ee(...a)}var Zo=10;function eo(t,n,e=Zo){return t.pipe(Z(o=>(n&&n.handleError(o),e<=1?t:eo(t,n,e-1))))}var to=(()=>{class t extends B{constructor(e){super(),e&&(this.source=e)}lift(e){let o=new t;return o.source=this,o.operator=e,o}static{this.\u0275fac=function(o){return new(o||t)(S(Ie))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function le(...t){return I(n=>t.some(e=>typeof e=="string"?e===n.type:e.type===n.type))}var Jo=new D("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>eo}),Xo="@ngrx/effects/init",qo=tn(Xo);function Qo(t,n){if(t.notification.kind==="N"){let e=t.notification.value;!er(e)&&n.handleError(new Error(`Effect ${tr(t)} dispatched an invalid action: ${nr(e)}`))}}function er(t){return typeof t!="function"&&t&&t.type&&typeof t.type=="string"}function tr({propertyName:t,sourceInstance:n,sourceName:e}){let o=typeof n[t]=="function";return!!e?`"${e}.${String(t)}${o?"()":""}"`:`"${String(t)}()"`}function nr(t){try{return JSON.stringify(t)}catch{return t}}var or="ngrxOnIdentifyEffects";function rr(t){return tt(t,or)}var ir="ngrxOnRunEffects";function sr(t){return tt(t,ir)}var ar="ngrxOnInitEffects";function cr(t){return tt(t,ar)}function tt(t,n){return t&&n in t&&typeof t[n]=="function"}var no=(()=>{class t extends q{constructor(e,o){super(),this.errorHandler=e,this.effectsErrorHandler=o}addEffects(e){this.next(e)}toActions(){return this.pipe(We(e=>Wo(e)?qn(e):e),Q(e=>e.pipe(We(lr))),Q(e=>{let o=e.pipe(Tt(i=>dr(this.errorHandler,this.effectsErrorHandler)(i)),b(i=>(Qo(i,this.errorHandler),i.notification)),I(i=>i.kind==="N"&&i.value!=null),_t()),r=e.pipe(L(1),I(cr),b(i=>i.ngrxOnInitEffects()));return ee(o,r)}))}static{this.\u0275fac=function(o){return new(o||t)(S(Ee),S(Jo))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function lr(t){return rr(t)?t.ngrxOnIdentifyEffects():""}function dr(t,n){return e=>{let o=Yo(e,t,n);return sr(e)?e.ngrxOnRunEffects(o):o}}var ur=(()=>{class t{get isStarted(){return!!this.effectsSubscription}constructor(e,o){this.effectSources=e,this.store=o,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(o){return new(o||t)(S(no),S(H))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function oo(...t){let n=t.flat(),e=Ho(n);return G([e,Rt(()=>{d(on),d(rn,{optional:!0});let o=d(ur),r=d(no),i=!o.isStarted;i&&o.start();for(let a of n){let l=Qn(a)?d(a):a;r.addEffects(l)}i&&d(H).dispatch(qo())})])}var he="PERFORM_ACTION",pr="REFRESH",lo="RESET",uo="ROLLBACK",po="COMMIT",mo="SWEEP",fo="TOGGLE_ACTION",mr="SET_ACTIONS_ACTIVE",ho="JUMP_TO_STATE",go="JUMP_TO_ACTION",ft="IMPORT_STATE",vo="LOCK_CHANGES",yo="PAUSE_RECORDING",de=class{constructor(n,e){if(this.action=n,this.timestamp=e,this.type=he,typeof n.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},nt=class{constructor(){this.type=pr}},ot=class{constructor(n){this.timestamp=n,this.type=lo}},rt=class{constructor(n){this.timestamp=n,this.type=uo}},it=class{constructor(n){this.timestamp=n,this.type=po}},st=class{constructor(){this.type=mo}},at=class{constructor(n){this.id=n,this.type=fo}};var ct=class{constructor(n){this.index=n,this.type=ho}},lt=class{constructor(n){this.actionId=n,this.type=go}},dt=class{constructor(n){this.nextLiftedState=n,this.type=ft}},ut=class{constructor(n){this.status=n,this.type=vo}},pt=class{constructor(n){this.status=n,this.type=yo}};var Ue=new D("@ngrx/store-devtools Options"),ro=new D("@ngrx/store-devtools Initial Config");function bo(){return null}var fr="NgRx Store DevTools";function hr(t){let n={maxAge:!1,monitor:bo,actionSanitizer:void 0,stateSanitizer:void 0,name:fr,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},e=typeof t=="function"?t():t,o=e.logOnly?{pause:!0,export:!0,test:!0}:!1,r=e.features||o||n.features;r.import===!0&&(r.import="custom");let i=Object.assign({},n,{features:r},e);if(i.maxAge&&i.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${i.maxAge}`);return i}function io(t,n){return t.filter(e=>n.indexOf(e)<0)}function Co(t){let{computedStates:n,currentStateIndex:e}=t;if(e>=n.length){let{state:r}=n[n.length-1];return r}let{state:o}=n[e];return o}function fe(t){return new de(t,+Date.now())}function gr(t,n){return Object.keys(n).reduce((e,o)=>{let r=Number(o);return e[r]=Eo(t,n[r],r),e},{})}function Eo(t,n,e){return Y(w({},n),{action:t(n.action,e)})}function vr(t,n){return n.map((e,o)=>({state:Oo(t,e.state,o),error:e.error}))}function Oo(t,n,e){return t(n,e)}function So(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function yr(t,n,e,o){let r=[],i={},a=[];return t.stagedActionIds.forEach((l,f)=>{let s=t.actionsById[l];s&&(f&&ht(t.computedStates[f],s,n,e,o)||(i[l]=s,r.push(l),a.push(t.computedStates[f])))}),Y(w({},t),{stagedActionIds:r,actionsById:i,computedStates:a})}function ht(t,n,e,o,r){let i=e&&!e(t,n.action),a=o&&!n.action.type.match(o.map(f=>so(f)).join("|")),l=r&&n.action.type.match(r.map(f=>so(f)).join("|"));return i||a||l}function so(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Mo(t){return{ngZone:t?d(ne):null,connectInZone:t}}var $e=(()=>{class t extends we{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=jt(t)))(r||t)}})()}static{this.\u0275prov=_({token:t,factory:t.\u0275fac})}}return t})(),je={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},mt=new D("@ngrx/store-devtools Redux Devtools Extension"),_o=(()=>{class t{constructor(e,o,r){this.config=o,this.dispatcher=r,this.zoneConfig=Mo(this.config.connectInZone),this.devtoolsExtension=e,this.createActionStreams()}notify(e,o){if(this.devtoolsExtension)if(e.type===he){if(o.isLocked||o.isPaused)return;let r=Co(o);if(So(this.config)&&ht(r,e,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let i=this.config.stateSanitizer?Oo(this.config.stateSanitizer,r,o.currentStateIndex):r,a=this.config.actionSanitizer?Eo(this.config.actionSanitizer,e,o.nextActionId):e;this.sendToReduxDevtools(()=>this.extensionConnection.send(a,i))}else{let r=Y(w({},o),{stagedActionIds:o.stagedActionIds,actionsById:this.config.actionSanitizer?gr(this.config.actionSanitizer,o.actionsById):o.actionsById,computedStates:this.config.stateSanitizer?vr(this.config.stateSanitizer,o.computedStates):o.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,r,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new B(e=>{let o=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=o,o.init(),o.subscribe(r=>e.next(r)),o.unsubscribe}):yt}createActionStreams(){let e=this.createChangesObservable().pipe(It()),o=e.pipe(I(s=>s.type===je.START)),r=e.pipe(I(s=>s.type===je.STOP)),i=e.pipe(I(s=>s.type===je.DISPATCH),b(s=>this.unwrapAction(s.payload)),Ot(s=>s.type===ft?this.dispatcher.pipe(I(v=>v.type===Xe),Ct(1e3),St(1e3),b(()=>s),Z(()=>R(s)),L(1)):R(s))),l=e.pipe(I(s=>s.type===je.ACTION),b(s=>this.unwrapAction(s.payload))).pipe(ge(r)),f=i.pipe(ge(r));this.start$=o.pipe(ge(r)),this.actions$=this.start$.pipe(V(()=>l)),this.liftedActions$=this.start$.pipe(V(()=>f))}unwrapAction(e){return typeof e=="string"?(0,eval)(`(${e})`):e}getExtensionConfig(e){let o={name:e.name,features:e.features,serialize:e.serialize,autoPause:e.autoPause??!1,trace:e.trace??!1,traceLimit:e.traceLimit??75};return e.maxAge!==!1&&(o.maxAge=e.maxAge),o}sendToReduxDevtools(e){try{e()}catch(o){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",o)}}static{this.\u0275fac=function(o){return new(o||t)(S(mt),S(Ue),S($e))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac})}}return t})(),Be={type:Je},br="@ngrx/store-devtools/recompute",Cr={type:br};function To(t,n,e,o,r){if(o)return{state:e,error:"Interrupted by an error up the chain"};let i=e,a;try{i=t(e,n)}catch(l){a=l.toString(),r.handleError(l)}return{state:i,error:a}}function Le(t,n,e,o,r,i,a,l,f){if(n>=t.length&&t.length===i.length)return t;let s=t.slice(0,n),v=i.length-(f?1:0);for(let c=n;c<v;c++){let h=i[c],T=r[h].action,m=s[c-1],u=m?m.state:o,F=m?m.error:void 0,N=a.indexOf(h)>-1?m:To(e,T,u,F,l);s.push(N)}return f&&s.push(t[t.length-1]),s}function Er(t,n){return{monitorState:n(void 0,{}),nextActionId:1,actionsById:{0:fe(Be)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function Or(t,n,e,o,r={}){return i=>(a,l)=>{let{monitorState:f,actionsById:s,nextActionId:v,stagedActionIds:c,skippedActionIds:h,committedState:T,currentStateIndex:m,computedStates:u,isLocked:F,isPaused:x}=a||n;a||(s=Object.create(s));function N(O){let E=O,K=c.slice(1,E+1);for(let k=0;k<K.length;k++)if(u[k+1].error){E=k,K=c.slice(1,E+1);break}else delete s[K[k]];h=h.filter(k=>K.indexOf(k)===-1),c=[0,...c.slice(E+1)],T=u[E].state,u=u.slice(E),m=m>E?m-E:0}function j(){s={0:fe(Be)},v=1,c=[0],h=[],T=u[m].state,m=0,u=[]}let y=0;switch(l.type){case vo:{F=l.status,y=1/0;break}case yo:{x=l.status,x?(c=[...c,v],s[v]=new de({type:"@ngrx/devtools/pause"},+Date.now()),v++,y=c.length-1,u=u.concat(u[u.length-1]),m===c.length-2&&m++,y=1/0):j();break}case lo:{s={0:fe(Be)},v=1,c=[0],h=[],T=t,m=0,u=[];break}case po:{j();break}case uo:{s={0:fe(Be)},v=1,c=[0],h=[],m=0,u=[];break}case fo:{let{id:O}=l;h.indexOf(O)===-1?h=[O,...h]:h=h.filter(K=>K!==O),y=c.indexOf(O);break}case mr:{let{start:O,end:E,active:K}=l,k=[];for(let Ge=O;Ge<E;Ge++)k.push(Ge);K?h=io(h,k):h=[...h,...k],y=c.indexOf(O);break}case ho:{m=l.index,y=1/0;break}case go:{let O=c.indexOf(l.actionId);O!==-1&&(m=O),y=1/0;break}case mo:{c=io(c,h),h=[],m=Math.min(m,c.length-1);break}case he:{if(F)return a||n;if(x||a&&ht(a.computedStates[m],l,r.predicate,r.actionsSafelist,r.actionsBlocklist)){let E=u[u.length-1];u=[...u.slice(0,-1),To(i,l.action,E.state,E.error,e)],y=1/0;break}r.maxAge&&c.length===r.maxAge&&N(1),m===c.length-1&&m++;let O=v++;s[O]=l,c=[...c,O],y=c.length-1;break}case ft:{({monitorState:f,actionsById:s,nextActionId:v,stagedActionIds:c,skippedActionIds:h,committedState:T,currentStateIndex:m,computedStates:u,isLocked:F,isPaused:x}=l.nextLiftedState);break}case Je:{y=0,r.maxAge&&c.length>r.maxAge&&(u=Le(u,y,i,T,s,c,h,e,x),N(c.length-r.maxAge),y=1/0);break}case Xe:{if(u.filter(E=>E.error).length>0)y=0,r.maxAge&&c.length>r.maxAge&&(u=Le(u,y,i,T,s,c,h,e,x),N(c.length-r.maxAge),y=1/0);else{if(!x&&!F){m===c.length-1&&m++;let E=v++;s[E]=new de(l,+Date.now()),c=[...c,E],y=c.length-1,u=Le(u,y,i,T,s,c,h,e,x)}u=u.map(E=>Y(w({},E),{state:i(E.state,Cr)})),m=c.length-1,r.maxAge&&c.length>r.maxAge&&N(c.length-r.maxAge),y=1/0}break}default:{y=1/0;break}}return u=Le(u,y,i,T,s,c,h,e,x),f=o(f,l),{monitorState:f,actionsById:s,nextActionId:v,stagedActionIds:c,skippedActionIds:h,committedState:T,currentStateIndex:m,computedStates:u,isLocked:F,isPaused:x}}}var ao=(()=>{class t{constructor(e,o,r,i,a,l,f,s){let v=Er(f,s.monitor),c=Or(f,v,l,s.monitor,s),h=ee(ee(o.asObservable().pipe(Pt(1)),i.actions$).pipe(b(fe)),e,i.liftedActions$).pipe(bt(vt)),T=r.pipe(b(c)),m=Mo(s.connectInZone),u=new gt(1);this.liftedStateSubscription=h.pipe(te(T),co(m),wt(({state:N},[j,y])=>{let O=y(N,j);return j.type!==he&&So(s)&&(O=yr(O,s.predicate,s.actionsSafelist,s.actionsBlocklist)),i.notify(j,O),{state:O,action:j}},{state:v,action:null})).subscribe(({state:N,action:j})=>{if(u.next(N),j.type===he){let y=j.action;a.next(y)}}),this.extensionStartSubscription=i.start$.pipe(co(m)).subscribe(()=>{this.refresh()});let F=u.asObservable(),x=F.pipe(b(Co));Object.defineProperty(x,"state",{value:en(x,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=e,this.liftedState=F,this.state=x}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(e){this.dispatcher.next(e)}next(e){this.dispatcher.next(e)}error(e){}complete(){}performAction(e){this.dispatch(new de(e,+Date.now()))}refresh(){this.dispatch(new nt)}reset(){this.dispatch(new ot(+Date.now()))}rollback(){this.dispatch(new rt(+Date.now()))}commit(){this.dispatch(new it(+Date.now()))}sweep(){this.dispatch(new st)}toggleAction(e){this.dispatch(new at(e))}jumpToAction(e){this.dispatch(new lt(e))}jumpToState(e){this.dispatch(new ct(e))}importState(e){this.dispatch(new dt(e))}lockChanges(e){this.dispatch(new ut(e))}pauseRecording(e){this.dispatch(new pt(e))}static{this.\u0275fac=function(o){return new(o||t)(S($e),S(we),S(sn),S(_o),S(Ie),S(Ee),S(nn),S(Ue))}}static{this.\u0275prov=_({token:t,factory:t.\u0275fac})}}return t})();function co({ngZone:t,connectInZone:n}){return e=>n?new B(o=>e.subscribe({next:r=>t.run(()=>o.next(r)),error:r=>t.run(()=>o.error(r)),complete:()=>t.run(()=>o.complete())})):e}var Sr=new D("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function Mr(t,n){return!!t||n.monitor!==bo}function _r(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function Tr(t){return t.state}function xo(t={}){return G([_o,$e,ao,{provide:ro,useValue:t},{provide:Sr,deps:[mt,Ue],useFactory:Mr},{provide:mt,useFactory:_r},{provide:Ue,deps:[ro],useFactory:hr},{provide:cn,deps:[ao],useFactory:Tr},{provide:an,useExisting:$e}])}var Ke=class t{CUSTOMER_KEY="khatabook_customers";TRANSACTION_KEY="khatabook_transactions";constructor(){}getCustomers(){let n=localStorage.getItem(this.CUSTOMER_KEY),e=n?JSON.parse(n):[];return R(e).pipe(ue(300))}saveCustomers(n){return localStorage.setItem(this.CUSTOMER_KEY,JSON.stringify(n)),R(!0).pipe(ue(200))}getTransactions(){let n=localStorage.getItem(this.TRANSACTION_KEY),e=n?JSON.parse(n):[];return R(e).pipe(ue(300))}saveTransactions(n){return localStorage.setItem(this.TRANSACTION_KEY,JSON.stringify(n)),R(!0).pipe(ue(200))}clearData(){localStorage.removeItem(this.CUSTOMER_KEY),localStorage.removeItem(this.TRANSACTION_KEY)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})};var ze=class t{actions$=d(to);localStorageService=d(Ke);store=d(H);loadCustomers$=ce(()=>this.actions$.pipe(le(Pe),Q(()=>this.localStorageService.getCustomers().pipe(b(n=>Cn({customers:n})),Z(n=>R(En({error:n})))))));loadTransactions$=ce(()=>this.actions$.pipe(le(ke),Q(()=>this.localStorageService.getTransactions().pipe(b(n=>Mn({transactions:n})),Z(n=>R(_n({error:n})))))));persistCustomers$=ce(()=>this.actions$.pipe(le(Ae,Sn,On),te(this.store.select(Pn)),He(([n,e])=>{this.localStorageService.saveCustomers(e).subscribe()})),{dispatch:!1});persistTransactions$=ce(()=>this.actions$.pipe(le(qe,xn,Tn),te(this.store.select(kn)),He(([n,e])=>{this.localStorageService.saveTransactions(e).subscribe()})),{dispatch:!1});updateCustomerBalance$=ce(()=>this.actions$.pipe(le(qe),te(this.store.select(An)),b(([{transaction:n},e])=>{let o=e[n.customerId];if(o){let r=o.currentBalance;n.type==="GAVE"?r+=n.amount:r-=n.amount;let i=Y(w({},o),{currentBalance:r,lastUpdated:new Date().toISOString()});return{type:"NO_OP"}}return{type:"NO_OP"}})),{dispatch:!1});static \u0275fac=function(e){return new(e||t)};static \u0275prov=_({token:t,factory:t.\u0275fac})};var wo={providers:[Dt(),Qt(Wn),ln({customers:wn,transactions:In}),oo([ze]),xo({maxAge:25,logOnly:!Ze()}),Vn(),zn(),Xn("ngsw-worker.js",{enabled:!Ze(),registrationStrategy:"registerWhenStable:30000"})]};var Ve=class t{title=Oe("khatabook");static \u0275fac=function(e){return new(e||t)};static \u0275cmp=oe({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(e,o){e&1&&W(0,"router-outlet")},dependencies:[Te],encapsulation:2})};qt(Ve,wo).catch(t=>console.error(t));
