import{$a as Re,A as yn,B as Q,C as bn,Ca as Sn,Db as qn,E as Cn,Ga as Tn,H as On,I as _n,Ka as xn,L as Mn,Na as wn,O as En,Xa as Pn,Ya as ke,Za as In,_a as An,ab as kn,b as tn,bb as Rn,c as le,cb as De,d as nn,db as Dn,e as on,eb as Nn,f as rn,fb as tt,g as sn,gb as Fn,h as de,hb as jn,i as an,ib as Bn,j as cn,jb as Ln,k as ln,kb as Un,lb as $n,m as we,mb as zn,n as Pe,o as dn,p as un,pb as Kn,q as pn,qb as Yn,r as qe,rb as Vn,s as Ie,sb as Gn,t as mn,tb as Hn,u as fn,ub as Wn,v as hn,vb as Zn,w as gn,wb as Jn,x as vn,xb as Xn,y as et,yb as Qn,z as Ae}from"./chunk-NCYOMZZN.js";import{$ as K,$a as v,$b as Jt,A,Aa as Te,Ab as Ht,Ba as Ut,C as ee,Cb as Xe,Cc as Qe,D as Tt,Da as $t,E as xt,F as L,G as wt,H as he,Ha as zt,I as Pt,Ib as k,Jb as d,K as It,Kb as m,Lb as U,N as Ze,Oa as Kt,P as At,Rb as xe,S as kt,T as Rt,V as Dt,Vb as Y,W as Nt,X as W,Xb as te,Y as Ce,Yb as Wt,Z as Je,Zb as Zt,_ as se,a as I,aa as Ft,ac as Xt,b as q,bc as Qt,ca as S,db as Yt,f as z,fa as N,fc as qt,g as oe,ga as E,gb as Vt,gc as ge,ha as u,hc as V,i as Ct,ia as Z,j as Ot,ja as jt,jb as Gt,jc as y,k as _t,kc as ce,l as Mt,lc as ne,n as D,na as Oe,oa as _e,ob as J,r as Et,ra as Me,rc as w,s as O,sa as Ee,sc as P,t as St,tc as en,u as re,ub as X,va as Bt,wa as ae,xa as Se,y as ie,z as H,za as Lt}from"./chunk-OI3YG3IB.js";var Lo="@",Uo=(()=>{class t{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=u(Me);loadingSchedulerFn=u($o,{optional:!0});_engine;constructor(e,o,r,i,a){this.doc=e,this.delegate=o,this.zone=r,this.animationType=i,this.moduleImpl=a}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-3T3BSB6M.js").then(r=>r),o;return this.loadingSchedulerFn?o=this.loadingSchedulerFn(e):o=e(),o.catch(r=>{throw new K(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:i})=>{this._engine=r(this.animationType,this.doc);let a=new i(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(e,o){let r=this.delegate.createRenderer(e,o);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let i=new nt(r);return o?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(e,o);i.use(l),this.scheduler??=this.injector.get(Ut,null,{optional:!0}),this.scheduler?.notify(10)}).catch(a=>{i.use(r)}),i}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(o){Gt()};static \u0275prov=S({token:t,factory:t.\u0275fac})}return t})(),nt=class{delegate;replay=[];\u0275type=1;constructor(n){this.delegate=n}use(n){if(this.delegate=n,this.replay!==null){for(let e of this.replay)e(n);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}get destroyNode(){return this.delegate.destroyNode}appendChild(n,e){this.delegate.appendChild(n,e)}insertBefore(n,e,o,r){this.delegate.insertBefore(n,e,o,r)}removeChild(n,e,o,r){this.delegate.removeChild(n,e,o,r)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,o,r){this.delegate.setAttribute(n,e,o,r)}removeAttribute(n,e,o){this.delegate.removeAttribute(n,e,o)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,o,r){this.delegate.setStyle(n,e,o,r)}removeStyle(n,e,o){this.delegate.removeStyle(n,e,o)}setProperty(n,e,o){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(n,e,o)),this.delegate.setProperty(n,e,o)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,o,r){return this.shouldReplay(e)&&this.replay.push(i=>i.listen(n,e,o,r)),this.delegate.listen(n,e,o,r)}shouldReplay(n){return this.replay!==null&&n.startsWith(Lo)}},$o=new N("");function eo(t="animations"){return Yt("NgAsyncAnimations"),Z([{provide:Vt,useFactory:()=>new Uo(u(Ee),u(an),u(ae),t)},{provide:Kt,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}function Yo(t,n){if(t&1){let e=xe();d(0,"div",18),Y("click",function(){let r=Oe(e).$implicit,i=te();return _e(i.viewCustomer(r.id))}),d(1,"div",19),y(2),w(3,"uppercase"),m(),d(4,"div",20)(5,"h3",21),y(6),m(),d(7,"span",22),y(8),w(9,"date"),m()(),d(10,"div",23)(11,"span",4),y(12),w(13,"number"),m(),d(14,"span",24),y(15),m()()()}if(t&2){let e=n.$implicit;v(2),ne(" ",P(3,9,e.name.charAt(0))," "),v(4),ce(e.name),v(2),ce(en(9,11,e.lastUpdated,"mediumDate")),v(2),V("positive",e.currentBalance>=0)("negative",e.currentBalance<0),v(2),ne("\u20B9",P(13,14,e.currentBalance)),v(3),ce(e.currentBalance>=0?"You will get":"You will give")}}function Vo(t,n){t&1&&(d(0,"div",25)(1,"p"),y(2,"No customers yet. Add one to start!"),m()())}var Ne=class t{store=u(Q);dialog=u(Sn);router=u(Pe);searchControl=new _n("");customers$=St([this.store.select(Kn),this.searchControl.valueChanges.pipe(Nt(""))]).pipe(O(([n,e])=>{let o=(e||"").toLowerCase();return n.filter(r=>r.name.toLowerCase().includes(o)||r.phoneNumber.includes(o)).sort((r,i)=>new Date(i.lastUpdated).getTime()-new Date(r.lastUpdated).getTime())}));totalToGet$=this.store.select(Yn);totalToGive$=this.store.select(Vn);netBalance$=this.store.select(Gn);ngOnInit(){this.store.dispatch(ke()),this.store.dispatch(De())}addCustomer(){this.dialog.open(Pn,{width:"300px"}).afterClosed().subscribe(e=>{if(e&&e.name){let o={id:crypto.randomUUID(),name:e.name,phoneNumber:e.phoneNumber||"",currentBalance:0,lastUpdated:new Date().toISOString()};this.store.dispatch(Re({customer:o}))}})}viewCustomer(n){this.router.navigate(["customer",n])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=J({type:t,selectors:[["app-customer-list"]],decls:42,vars:33,consts:[[1,"list-container"],[1,"summary-card","card"],[1,"summary-top"],[1,"label"],[1,"amount"],[1,"summary-bottom"],[1,"summary-item"],[1,"amount","text-success"],[1,"amount","text-danger"],[1,"search-bar"],["type","text","placeholder","Search Customer...",1,"search-input",3,"formControl"],[1,"customer-list-content"],[1,"list-header"],[1,"btn","btn-primary","btn-sm","desktop-only",3,"click"],[1,"customers"],["class","customer-item card",3,"click",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"fab",3,"click"],[1,"customer-item","card",3,"click"],[1,"customer-avatar"],[1,"customer-info"],[1,"customer-name"],[1,"last-updated"],[1,"customer-balance"],[1,"status"],[1,"empty-state"]],template:function(e,o){if(e&1&&(d(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),y(4,"Net Balance"),m(),d(5,"h2",4),w(6,"async"),w(7,"async"),y(8),w(9,"async"),w(10,"number"),m()(),d(11,"div",5)(12,"div",6)(13,"span",3),y(14,"You will get"),m(),d(15,"span",7),y(16),w(17,"async"),w(18,"number"),m()(),d(19,"div",6)(20,"span",3),y(21,"You will give"),m(),d(22,"span",8),y(23),w(24,"async"),w(25,"number"),m()()()(),d(26,"div",9),U(27,"input",10),m(),d(28,"div",11)(29,"div",12)(30,"span"),y(31),w(32,"async"),m(),d(33,"button",13),Y("click",function(){return o.addCustomer()}),y(34,"+ Add Customer"),m()(),d(35,"div",14),X(36,Yo,16,16,"div",15),w(37,"async"),X(38,Vo,3,0,"div",16),w(39,"async"),m()(),d(40,"button",17),Y("click",function(){return o.addCustomer()}),y(41,"+"),m()()),e&2){let r,i;v(5),V("positive",P(6,11,o.netBalance$)>=0)("negative",P(7,13,o.netBalance$)<0),v(3),ne(" \u20B9",P(10,17,P(9,15,o.netBalance$))," "),v(8),ne("\u20B9",P(18,21,P(17,19,o.totalToGet$))),v(7),ne("\u20B9",P(25,25,P(24,23,o.totalToGive$))),v(4),k("formControl",o.searchControl),v(4),ne("",(r=P(32,27,o.customers$))==null?null:r.length," Customers"),v(5),k("ngForOf",P(37,29,o.customers$)),v(2),k("ngIf",((i=P(39,31,o.customers$))==null?null:i.length)===0)}},dependencies:[de,tn,le,Tn,En,Cn,On,Mn,nn,on,sn,rn],styles:[".list-container[_ngcontent-%COMP%]{padding:1rem;height:100%;overflow-y:auto;background-color:var(--background-color)}.summary-card[_ngcontent-%COMP%]{padding:0!important;margin-bottom:1.5rem;overflow:hidden}.summary-card[_ngcontent-%COMP%]   .summary-top[_ngcontent-%COMP%]{padding:1.25rem;text-align:center;border-bottom:1px solid var(--border-color)}.summary-card[_ngcontent-%COMP%]   .summary-top[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:.8rem;text-transform:uppercase;color:var(--text-secondary);margin-bottom:.5rem;letter-spacing:.05em}.summary-card[_ngcontent-%COMP%]   .summary-top[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:700}.summary-card[_ngcontent-%COMP%]   .summary-top[_ngcontent-%COMP%]   .amount.positive[_ngcontent-%COMP%]{color:var(--success-color)}.summary-card[_ngcontent-%COMP%]   .summary-top[_ngcontent-%COMP%]   .amount.negative[_ngcontent-%COMP%]{color:var(--danger-color)}.summary-card[_ngcontent-%COMP%]   .summary-bottom[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr}.summary-card[_ngcontent-%COMP%]   .summary-bottom[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{padding:1rem;text-align:center}.summary-card[_ngcontent-%COMP%]   .summary-bottom[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:first-child{border-right:1px solid var(--border-color)}.summary-card[_ngcontent-%COMP%]   .summary-bottom[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-secondary);margin-bottom:.25rem}.summary-card[_ngcontent-%COMP%]   .summary-bottom[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.summary-card[_ngcontent-%COMP%]   .summary-bottom[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .amount.text-success[_ngcontent-%COMP%]{color:var(--success-color)}.summary-card[_ngcontent-%COMP%]   .summary-bottom[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .amount.text-danger[_ngcontent-%COMP%]{color:var(--danger-color)}.search-bar[_ngcontent-%COMP%]{margin-bottom:1rem}.search-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid var(--border-color);border-radius:.5rem;font-size:1rem;box-sizing:border-box}.search-bar[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px var(--primary-light)}.customer-list-content[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;color:var(--text-secondary);font-size:.875rem}.customer-list-content[_ngcontent-%COMP%]   .customers[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;padding-bottom:80px}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;cursor:pointer;transition:transform .1s,background-color .2s}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]:hover{background-color:var(--hover-bg)}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]:active{transform:scale(.99)}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-avatar[_ngcontent-%COMP%]{width:40px;height:40px;background-color:var(--primary-light);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;margin-right:1rem;flex-shrink:0}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]{flex:1;min-width:0}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-info[_ngcontent-%COMP%]   .last-updated[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary)}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-balance[_ngcontent-%COMP%]{text-align:right;display:flex;flex-direction:column;flex-shrink:0}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-balance[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:600;font-size:1rem}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-balance[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-size:.65rem;color:var(--text-secondary)}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-balance.positive[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:var(--success-color)}.customer-list-content[_ngcontent-%COMP%]   .customer-item[_ngcontent-%COMP%]   .customer-balance.negative[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:var(--danger-color)}.fab[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;width:56px;height:56px;border-radius:50%;background-color:var(--primary-color);color:#fff;font-size:2rem;border:none;box-shadow:var(--shadow-lg);display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:100}.fab[_ngcontent-%COMP%]:hover{background-color:var(--primary-dark);transform:scale(1.05)}@media(min-width:768px){.fab[_ngcontent-%COMP%]{display:none}}.desktop-only[_ngcontent-%COMP%]{display:none}@media(min-width:768px){.desktop-only[_ngcontent-%COMP%]{display:inline-flex}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:var(--text-secondary)}"]})};var Fe=class t{document=u(Ee);meta=u(ln);currentTheme=Te("system");constructor(){let n=localStorage.getItem("theme");n&&this.currentTheme.set(n),$t(()=>{let o=this.currentTheme();this.applyTheme(o),localStorage.setItem("theme",o)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{this.currentTheme()==="system"&&this.applyTheme("system")})}toggleTheme(){let n=this.currentTheme();if(n==="light")this.currentTheme.set("dark");else if(n==="dark")this.currentTheme.set("light");else{let e=window.matchMedia("(prefers-color-scheme: dark)").matches;this.currentTheme.set(e?"light":"dark")}}setTheme(n){this.currentTheme.set(n)}applyTheme(n){let e=this.document.body;e.classList.remove("light-theme","dark-theme");let o;n==="system"?o=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":o=n,e.classList.add(`${o}-theme`);let r=o==="dark"?"#1e1e1e":"#ffffff";this.meta.updateTag({name:"theme-color",content:r})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})};var Go=["container"],Ho=["*"];function Wo(t,n){t&1&&U(0,"div",6)}function Zo(t,n){if(t&1&&(d(0,"div",7),y(1,"\u2193"),m()),t&2){let e=te();ge("transform","rotate("+e.currentY*2+"deg)")}}var je=class t{scrollable=!0;refresh=new Bt;container;startY=0;currentY=0;refreshing=!1;pullThreshold=80;onTouchStart(n){if(this.refreshing)return;let e=n.composedPath(),o=!1;for(let r of e)if(r instanceof HTMLElement){if(r.scrollTop>0){o=!0;break}if(r.classList.contains("content")&&r.scrollTop>0){o=!0;break}}o?this.startY=-1:this.startY=n.touches[0].pageY}onTouchMove(n){if(this.startY===-1||this.refreshing)return;let o=n.touches[0].pageY-this.startY;o>0&&(this.currentY=Math.pow(o,.85),this.currentY>0&&n.preventDefault())}onTouchEnd(){this.startY===-1||this.refreshing||(this.currentY>=this.pullThreshold?this.triggerRefresh():this.reset())}triggerRefresh(){this.refreshing=!0,this.refresh.emit(),setTimeout(()=>this.finishRefresh(),2e3)}finishRefresh(){this.refreshing=!1,this.reset()}reset(){this.currentY=0,this.startY=-1}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=J({type:t,selectors:[["app-pull-to-refresh"]],viewQuery:function(e,o){if(e&1&&Jt(Go,5),e&2){let r;Xt(r=Qt())&&(o.container=r.first)}},hostVars:6,hostBindings:function(e,o){e&1&&Y("touchstart",function(i){return o.onTouchStart(i)})("touchmove",function(i){return o.onTouchMove(i)})("touchend",function(){return o.onTouchEnd()}),e&2&&ge("display","block")("height","100vh")("width","100%")},inputs:{scrollable:"scrollable"},outputs:{refresh:"refresh"},ngContentSelectors:Ho,decls:7,vars:12,consts:[["container",""],[1,"pull-to-refresh-container"],[1,"refresh-indicator"],["class","spinner",4,"ngIf"],["class","arrow",3,"transform",4,"ngIf"],[1,"content"],[1,"spinner"],[1,"arrow"]],template:function(e,o){e&1&&(Wt(),d(0,"div",1,0)(2,"div",2),X(3,Wo,1,0,"div",3)(4,Zo,2,2,"div",4),m(),d(5,"div",5),Zt(6),m()()),e&2&&(v(2),ge("transform","translateY("+o.currentY+"px)"),V("refreshing",o.refreshing),v(),k("ngIf",o.refreshing),v(),k("ngIf",!o.refreshing&&o.currentY>20),v(),ge("transform","translateY("+o.currentY+"px)")("overflow-y",o.scrollable?"auto":"visible"),V("refreshing",o.refreshing))},dependencies:[de,le],styles:[".pull-to-refresh-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;height:100%}.refresh-indicator[_ngcontent-%COMP%]{position:absolute;top:-50px;left:0;right:0;height:50px;display:flex;align-items:center;justify-content:center;z-index:100;transition:transform .1s ease-out;pointer-events:none}.refresh-indicator.refreshing[_ngcontent-%COMP%]{transform:translateY(60px)!important;transition:transform .3s ease-in-out}.content[_ngcontent-%COMP%]{height:100%;overflow-y:auto;transition:transform .1s ease-out;-webkit-overflow-scrolling:touch}.content.refreshing[_ngcontent-%COMP%]{transform:translateY(50px)!important;transition:transform .3s ease-in-out}.spinner[_ngcontent-%COMP%]{width:24px;height:24px;border:3px solid var(--primary-light);border-top:3px solid var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.arrow[_ngcontent-%COMP%]{font-size:24px;color:var(--primary-color);font-weight:700}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};function Jo(t,n){if(t&1){let e=xe();d(0,"header",8)(1,"div",9)(2,"div",10),U(3,"img",11),d(4,"h1"),y(5,"Khatabook"),m()(),d(6,"div",12)(7,"button",13)(8,"mat-icon"),y(9,"settings"),m()(),d(10,"mat-menu",null,0)(12,"button",14),Y("click",function(){Oe(e);let r=te();return _e(r.themeService.toggleTheme())}),d(13,"mat-icon"),y(14),m(),d(15,"span"),y(16,"Toggle Theme"),m()()()()()()}if(t&2){let e=qt(11),o=te();v(7),k("matMenuTriggerFor",e),v(7),ce(o.themeService.currentTheme()==="dark"?"light_mode":"dark_mode")}}function Xo(t,n){t&1&&(d(0,"div",15)(1,"div",16)(2,"span",17),y(3,"receipt_long"),m(),d(4,"h2"),y(5,"Select a Customer"),m(),d(6,"p"),y(7,"Click on a customer to view their transactions."),m()()())}var Be=class t{router=u(Pe);themeService=u(Fe);handleRefresh(){window.location.reload()}get showListOnMobile(){return!this.router.url.includes("/customer/")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=J({type:t,selectors:[["app-dashboard"]],decls:9,vars:7,consts:[["settingsMenu","matMenu"],[3,"refresh","scrollable"],[1,"app-layout"],["class","app-header",4,"ngIf"],[1,"split-pane","container"],[1,"sidebar"],[1,"main-content"],["class","placeholder-content",4,"ngIf"],[1,"app-header"],[1,"container"],[1,"brand"],["src","icons/icon-192x192.png","alt","Logo",1,"app-logo"],[1,"actions"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"placeholder-content"],[1,"placeholder-msg"],[1,"material-icons","big-icon"]],template:function(e,o){e&1&&(d(0,"app-pull-to-refresh",1),Y("refresh",function(){return o.handleRefresh()}),d(1,"div",2),X(2,Jo,17,2,"header",3),d(3,"div",4)(4,"div",5),U(5,"app-customer-list"),m(),d(6,"div",6),U(7,"router-outlet"),X(8,Xo,8,0,"div",7),m()()()()),e&2&&(k("scrollable",!1),v(2),k("ngIf",o.showListOnMobile),v(2),V("mobile-hidden",!o.showListOnMobile),v(2),V("mobile-hidden",o.showListOnMobile),v(2),k("ngIf",o.showListOnMobile))},dependencies:[de,le,we,Ne,Jn,Wn,Hn,Zn,Qn,Xn,wn,xn,je],styles:[".app-layout[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;overflow:hidden;background-color:var(--background-color)}.app-header[_ngcontent-%COMP%]{background:var(--surface-color);border-bottom:1px solid var(--border-color);flex-shrink:0;padding:.75rem 1rem;height:60px;box-sizing:border-box}.app-header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.app-header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.app-header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   .app-logo[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:6px;box-shadow:0 2px 4px #0000001a}.app-header[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:var(--primary-color)}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:var(--primary-color)}.split-pane[_ngcontent-%COMP%]{flex:1;display:flex;overflow:hidden;padding:0;max-width:100%!important;margin:0}@media(min-width:768px){.split-pane[_ngcontent-%COMP%]{max-width:1200px!important;margin:0 auto;padding:1rem;gap:1rem}}.sidebar[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff}@media(min-width:768px){.sidebar[_ngcontent-%COMP%]{width:350px;border-radius:.5rem;border:1px solid var(--border-color);box-shadow:var(--shadow-sm);flex-shrink:0}}.main-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff;display:flex;flex-direction:column}@media(min-width:768px){.main-content[_ngcontent-%COMP%]{flex:1;border-radius:.5rem;border:1px solid var(--border-color);box-shadow:var(--shadow-sm);overflow:hidden}}@media(max-width:767px){.mobile-hidden[_ngcontent-%COMP%]{display:none!important}}.placeholder-content[_ngcontent-%COMP%]{display:none}@media(min-width:768px){.placeholder-content[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;align-items:center;justify-content:center;color:var(--text-secondary);text-align:center}.placeholder-content[_ngcontent-%COMP%]   .big-icon[_ngcontent-%COMP%]{font-size:4rem;color:var(--primary-light);margin-bottom:1rem;opacity:.5}.placeholder-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:.5rem}}"]})};var no=[{path:"",component:Be,children:[{path:"customer/:id",loadComponent:()=>import("./chunk-IKQSFDDQ.js").then(t=>t.CustomerLedgerComponent)}]}];var rt="Service workers are disabled or not supported by this browser",ue=class{serviceWorker;worker;registration;events;constructor(n,e){if(this.serviceWorker=n,!n)this.worker=this.events=this.registration=new z(o=>o.error(new K(5601,!1)));else{let o=null,r=new oe;this.worker=new z(s=>(o!==null&&s.next(o),r.subscribe(b=>s.next(b))));let i=()=>{let{controller:s}=n;s!==null&&(o=s,r.next(o))};n.addEventListener("controllerchange",i),i(),this.registration=this.worker.pipe(W(()=>n.getRegistration().then(s=>{if(!s)throw new K(5601,!1);return s})));let a=new oe;this.events=a.asObservable();let l=s=>{let{data:b}=s;b?.type&&a.next(b)};n.addEventListener("message",l),e?.get(Xe,null,{optional:!0})?.onDestroy(()=>{n.removeEventListener("controllerchange",i),n.removeEventListener("message",l)})}}postMessage(n,e){return new Promise(o=>{this.worker.pipe(L(1)).subscribe(r=>{r.postMessage(I({action:n},e)),o()})})}postMessageWithOperation(n,e,o){let r=this.waitForOperationCompleted(o),i=this.postMessage(n,e);return Promise.all([i,r]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(n){let e;return typeof n=="string"?e=o=>o.type===n:e=o=>n.includes(o.type),this.events.pipe(A(e))}nextEventOfType(n){return this.eventsOfType(n).pipe(L(1))}waitForOperationCompleted(n){return new Promise((e,o)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(A(r=>r.nonce===n),L(1),O(r=>{if(r.result!==void 0)return r.result;throw new Error(r.error)})).subscribe({next:e,error:o})})}get isEnabled(){return!!this.serviceWorker}},Qo=(()=>{class t{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new oe;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=H,this.notificationClicks=H,this.notificationCloses=H,this.pushSubscriptionChanges=H,this.subscription=H;return}this.messages=this.sw.eventsOfType("PUSH").pipe(O(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(O(r=>r.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(O(r=>r.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(O(r=>r.data)),this.pushManager=this.sw.registration.pipe(O(r=>r.pushManager));let o=this.pushManager.pipe(W(r=>r.getSubscription()));this.subscription=new z(r=>{let i=o.subscribe(r),a=this.subscriptionChanges.subscribe(r);return()=>{i.unsubscribe(),a.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(rt));let o={userVisibleOnly:!0},r=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),i=new Uint8Array(new ArrayBuffer(r.length));for(let a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return o.applicationServerKey=i,new Promise((a,l)=>{this.pushManager.pipe(W(h=>h.subscribe(o)),L(1)).subscribe({next:h=>{this.subscriptionChanges.next(h),a(h)},error:l})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(rt));let e=o=>{if(o===null)throw new K(5602,!1);return o.unsubscribe().then(r=>{if(!r)throw new K(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((o,r)=>{this.subscription.pipe(L(1),W(e)).subscribe({next:o,error:r})})}decodeBase64(e){return atob(e)}static \u0275fac=function(o){return new(o||t)(E(ue))};static \u0275prov=S({token:t,factory:t.\u0275fac})}return t})(),qo=(()=>{class t{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=H,this.unrecoverable=H;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(rt));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let e=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new K(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(o){return new(o||t)(E(ue))};static \u0275prov=S({token:t,factory:t.\u0275fac})}return t})(),so=new N("");function er(){let t=u(ve);if(!("serviceWorker"in navigator&&t.enabled!==!1))return;let n=u(so),e=u(ae),o=u(Xe);e.runOutsideAngular(()=>{let r=navigator.serviceWorker,i=()=>r.controller?.postMessage({action:"INITIALIZE"});r.addEventListener("controllerchange",i),o.onDestroy(()=>{r.removeEventListener("controllerchange",i)})}),e.runOutsideAngular(()=>{let r,{registrationStrategy:i}=t;if(typeof i=="function")r=new Promise(a=>i().subscribe(()=>a()));else{let[a,...l]=(i||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":r=Promise.resolve();break;case"registerWithDelay":r=oo(+l[0]||0);break;case"registerWhenStable":r=Promise.race([o.whenStable(),oo(+l[0])]);break;default:throw new K(5600,!1)}}r.then(()=>{o.destroyed||navigator.serviceWorker.register(n,{scope:t.scope,updateViaCache:t.updateViaCache,type:t.type}).catch(a=>console.error(Ft(5604,!1)))})})}function oo(t){return new Promise(n=>setTimeout(n,t))}function tr(){let t=u(ve),n=u(Me),e=!0;return new ue(e&&t.enabled!==!1?navigator.serviceWorker:void 0,n)}var ve=class{enabled;updateViaCache;type;scope;registrationStrategy};function ao(t,n={}){return Z([Qo,qo,{provide:so,useValue:t},{provide:ve,useValue:n},{provide:ue,useFactory:tr},Ht(er)])}var or={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},Le="__@ngrx/effects_create__";function pe(t,n={}){let e=n.functional?t:t(),o=I(I({},or),n);return Object.defineProperty(e,Le,{value:o}),e}function rr(t){return Object.getOwnPropertyNames(t).filter(o=>t[o]&&t[o].hasOwnProperty(Le)?t[o][Le].hasOwnProperty("dispatch"):!1).map(o=>{let r=t[o][Le];return I({propertyName:o},r)})}function ir(t){return rr(t)}function co(t){return Object.getPrototypeOf(t)}function sr(t){return!!t.constructor&&t.constructor.name!=="Object"&&t.constructor.name!=="Function"}function lo(t){return typeof t=="function"}function ar(t){return t.filter(lo)}function cr(t,n,e){let o=co(t),i=!!o&&o.constructor.name!=="Object"?o.constructor.name:null,a=ir(t).map(({propertyName:l,dispatch:h,useEffectsErrorHandler:s})=>{let b=typeof t[l]=="function"?t[l]():t[l],c=s?e(b,n):b;return h===!1?c.pipe(wt()):c.pipe(At()).pipe(O(T=>({effect:t[l],notification:T,propertyName:l,sourceName:i,sourceInstance:t})))});return ie(...a)}var lr=10;function uo(t,n,e=lr){return t.pipe(ee(o=>(n&&n.handleError(o),e<=1?t:uo(t,n,e-1))))}var po=(()=>{class t extends z{constructor(e){super(),e&&(this.source=e)}lift(e){let o=new t;return o.source=this,o.operator=e,o}static{this.\u0275fac=function(o){return new(o||t)(E(Ae))}}static{this.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function me(...t){return A(n=>t.some(e=>typeof e=="string"?e===n.type:e.type===n.type))}var dr=new N("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>uo}),ur="@ngrx/effects/init",pr=pn(ur);function mr(t,n){if(t.notification.kind==="N"){let e=t.notification.value;!fr(e)&&n.handleError(new Error(`Effect ${hr(t)} dispatched an invalid action: ${gr(e)}`))}}function fr(t){return typeof t!="function"&&t&&t.type&&typeof t.type=="string"}function hr({propertyName:t,sourceInstance:n,sourceName:e}){let o=typeof n[t]=="function";return!!e?`"${e}.${String(t)}${o?"()":""}"`:`"${String(t)}()"`}function gr(t){try{return JSON.stringify(t)}catch{return t}}var vr="ngrxOnIdentifyEffects";function yr(t){return it(t,vr)}var br="ngrxOnRunEffects";function Cr(t){return it(t,br)}var Or="ngrxOnInitEffects";function _r(t){return it(t,Or)}function it(t,n){return t&&n in t&&typeof t[n]=="function"}var mo=(()=>{class t extends oe{constructor(e,o){super(),this.errorHandler=e,this.effectsErrorHandler=o}addEffects(e){this.next(e)}toActions(){return this.pipe(Ze(e=>sr(e)?co(e):e),re(e=>e.pipe(Ze(Mr))),re(e=>{let o=e.pipe(It(i=>Er(this.errorHandler,this.effectsErrorHandler)(i)),O(i=>(mr(i,this.errorHandler),i.notification)),A(i=>i.kind==="N"&&i.value!=null),Pt()),r=e.pipe(L(1),A(_r),O(i=>i.ngrxOnInitEffects()));return ie(o,r)}))}static{this.\u0275fac=function(o){return new(o||t)(E(Se),E(dr))}}static{this.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Mr(t){return yr(t)?t.ngrxOnIdentifyEffects():""}function Er(t,n){return e=>{let o=cr(e,t,n);return Cr(e)?e.ngrxOnRunEffects(o):o}}var Sr=(()=>{class t{get isStarted(){return!!this.effectsSubscription}constructor(e,o){this.effectSources=e,this.store=o,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(o){return new(o||t)(E(mo),E(Q))}}static{this.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function fo(...t){let n=t.flat(),e=ar(n);return Z([e,jt(()=>{u(fn),u(hn,{optional:!0});let o=u(Sr),r=u(mo),i=!o.isStarted;i&&o.start();for(let a of n){let l=lo(a)?u(a):a;r.addEffects(l)}i&&u(Q).dispatch(pr())})])}var be="PERFORM_ACTION",Tr="REFRESH",Co="RESET",Oo="ROLLBACK",_o="COMMIT",Mo="SWEEP",Eo="TOGGLE_ACTION",xr="SET_ACTIONS_ACTIVE",So="JUMP_TO_STATE",To="JUMP_TO_ACTION",yt="IMPORT_STATE",xo="LOCK_CHANGES",wo="PAUSE_RECORDING",fe=class{constructor(n,e){if(this.action=n,this.timestamp=e,this.type=be,typeof n.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},st=class{constructor(){this.type=Tr}},at=class{constructor(n){this.timestamp=n,this.type=Co}},ct=class{constructor(n){this.timestamp=n,this.type=Oo}},lt=class{constructor(n){this.timestamp=n,this.type=_o}},dt=class{constructor(){this.type=Mo}},ut=class{constructor(n){this.id=n,this.type=Eo}};var pt=class{constructor(n){this.index=n,this.type=So}},mt=class{constructor(n){this.actionId=n,this.type=To}},ft=class{constructor(n){this.nextLiftedState=n,this.type=yt}},ht=class{constructor(n){this.status=n,this.type=xo}},gt=class{constructor(n){this.status=n,this.type=wo}};var Ke=new N("@ngrx/store-devtools Options"),ho=new N("@ngrx/store-devtools Initial Config");function Po(){return null}var wr="NgRx Store DevTools";function Pr(t){let n={maxAge:!1,monitor:Po,actionSanitizer:void 0,stateSanitizer:void 0,name:wr,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},e=typeof t=="function"?t():t,o=e.logOnly?{pause:!0,export:!0,test:!0}:!1,r=e.features||o||n.features;r.import===!0&&(r.import="custom");let i=Object.assign({},n,{features:r},e);if(i.maxAge&&i.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${i.maxAge}`);return i}function go(t,n){return t.filter(e=>n.indexOf(e)<0)}function Io(t){let{computedStates:n,currentStateIndex:e}=t;if(e>=n.length){let{state:r}=n[n.length-1];return r}let{state:o}=n[e];return o}function ye(t){return new fe(t,+Date.now())}function Ir(t,n){return Object.keys(n).reduce((e,o)=>{let r=Number(o);return e[r]=Ao(t,n[r],r),e},{})}function Ao(t,n,e){return q(I({},n),{action:t(n.action,e)})}function Ar(t,n){return n.map((e,o)=>({state:ko(t,e.state,o),error:e.error}))}function ko(t,n,e){return t(n,e)}function Ro(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function kr(t,n,e,o){let r=[],i={},a=[];return t.stagedActionIds.forEach((l,h)=>{let s=t.actionsById[l];s&&(h&&bt(t.computedStates[h],s,n,e,o)||(i[l]=s,r.push(l),a.push(t.computedStates[h])))}),q(I({},t),{stagedActionIds:r,actionsById:i,computedStates:a})}function bt(t,n,e,o,r){let i=e&&!e(t,n.action),a=o&&!n.action.type.match(o.map(h=>vo(h)).join("|")),l=r&&n.action.type.match(r.map(h=>vo(h)).join("|"));return i||a||l}function vo(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Do(t){return{ngZone:t?u(ae):null,connectInZone:t}}var Ye=(()=>{class t extends Ie{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=zt(t)))(r||t)}})()}static{this.\u0275prov=S({token:t,factory:t.\u0275fac})}}return t})(),Ue={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},vt=new N("@ngrx/store-devtools Redux Devtools Extension"),No=(()=>{class t{constructor(e,o,r){this.config=o,this.dispatcher=r,this.zoneConfig=Do(this.config.connectInZone),this.devtoolsExtension=e,this.createActionStreams()}notify(e,o){if(this.devtoolsExtension)if(e.type===be){if(o.isLocked||o.isPaused)return;let r=Io(o);if(Ro(this.config)&&bt(r,e,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let i=this.config.stateSanitizer?ko(this.config.stateSanitizer,r,o.currentStateIndex):r,a=this.config.actionSanitizer?Ao(this.config.actionSanitizer,e,o.nextActionId):e;this.sendToReduxDevtools(()=>this.extensionConnection.send(a,i))}else{let r=q(I({},o),{stagedActionIds:o.stagedActionIds,actionsById:this.config.actionSanitizer?Ir(this.config.actionSanitizer,o.actionsById):o.actionsById,computedStates:this.config.stateSanitizer?Ar(this.config.stateSanitizer,o.computedStates):o.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,r,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new z(e=>{let o=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=o,o.init(),o.subscribe(r=>e.next(r)),o.unsubscribe}):_t}createActionStreams(){let e=this.createChangesObservable().pipe(Rt()),o=e.pipe(A(s=>s.type===Ue.START)),r=e.pipe(A(s=>s.type===Ue.STOP)),i=e.pipe(A(s=>s.type===Ue.DISPATCH),O(s=>this.unwrapAction(s.payload)),Tt(s=>s.type===yt?this.dispatcher.pipe(A(b=>b.type===et),Et(1e3),xt(1e3),O(()=>s),ee(()=>D(s)),L(1)):D(s))),l=e.pipe(A(s=>s.type===Ue.ACTION),O(s=>this.unwrapAction(s.payload))).pipe(Ce(r)),h=i.pipe(Ce(r));this.start$=o.pipe(Ce(r)),this.actions$=this.start$.pipe(W(()=>l)),this.liftedActions$=this.start$.pipe(W(()=>h))}unwrapAction(e){return typeof e=="string"?(0,eval)(`(${e})`):e}getExtensionConfig(e){let o={name:e.name,features:e.features,serialize:e.serialize,autoPause:e.autoPause??!1,trace:e.trace??!1,traceLimit:e.traceLimit??75};return e.maxAge!==!1&&(o.maxAge=e.maxAge),o}sendToReduxDevtools(e){try{e()}catch(o){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",o)}}static{this.\u0275fac=function(o){return new(o||t)(E(vt),E(Ke),E(Ye))}}static{this.\u0275prov=S({token:t,factory:t.\u0275fac})}}return t})(),ze={type:qe},Rr="@ngrx/store-devtools/recompute",Dr={type:Rr};function Fo(t,n,e,o,r){if(o)return{state:e,error:"Interrupted by an error up the chain"};let i=e,a;try{i=t(e,n)}catch(l){a=l.toString(),r.handleError(l)}return{state:i,error:a}}function $e(t,n,e,o,r,i,a,l,h){if(n>=t.length&&t.length===i.length)return t;let s=t.slice(0,n),b=i.length-(h?1:0);for(let c=n;c<b;c++){let g=i[c],T=r[g].action,f=s[c-1],p=f?f.state:o,F=f?f.error:void 0,j=a.indexOf(g)>-1?f:Fo(e,T,p,F,l);s.push(j)}return h&&s.push(t[t.length-1]),s}function Nr(t,n){return{monitorState:n(void 0,{}),nextActionId:1,actionsById:{0:ye(ze)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function Fr(t,n,e,o,r={}){return i=>(a,l)=>{let{monitorState:h,actionsById:s,nextActionId:b,stagedActionIds:c,skippedActionIds:g,committedState:T,currentStateIndex:f,computedStates:p,isLocked:F,isPaused:x}=a||n;a||(s=Object.create(s));function j(M){let _=M,G=c.slice(1,_+1);for(let R=0;R<G.length;R++)if(p[R+1].error){_=R,G=c.slice(1,_+1);break}else delete s[G[R]];g=g.filter(R=>G.indexOf(R)===-1),c=[0,...c.slice(_+1)],T=p[_].state,p=p.slice(_),f=f>_?f-_:0}function B(){s={0:ye(ze)},b=1,c=[0],g=[],T=p[f].state,f=0,p=[]}let C=0;switch(l.type){case xo:{F=l.status,C=1/0;break}case wo:{x=l.status,x?(c=[...c,b],s[b]=new fe({type:"@ngrx/devtools/pause"},+Date.now()),b++,C=c.length-1,p=p.concat(p[p.length-1]),f===c.length-2&&f++,C=1/0):B();break}case Co:{s={0:ye(ze)},b=1,c=[0],g=[],T=t,f=0,p=[];break}case _o:{B();break}case Oo:{s={0:ye(ze)},b=1,c=[0],g=[],f=0,p=[];break}case Eo:{let{id:M}=l;g.indexOf(M)===-1?g=[M,...g]:g=g.filter(G=>G!==M),C=c.indexOf(M);break}case xr:{let{start:M,end:_,active:G}=l,R=[];for(let We=M;We<_;We++)R.push(We);G?g=go(g,R):g=[...g,...R],C=c.indexOf(M);break}case So:{f=l.index,C=1/0;break}case To:{let M=c.indexOf(l.actionId);M!==-1&&(f=M),C=1/0;break}case Mo:{c=go(c,g),g=[],f=Math.min(f,c.length-1);break}case be:{if(F)return a||n;if(x||a&&bt(a.computedStates[f],l,r.predicate,r.actionsSafelist,r.actionsBlocklist)){let _=p[p.length-1];p=[...p.slice(0,-1),Fo(i,l.action,_.state,_.error,e)],C=1/0;break}r.maxAge&&c.length===r.maxAge&&j(1),f===c.length-1&&f++;let M=b++;s[M]=l,c=[...c,M],C=c.length-1;break}case yt:{({monitorState:h,actionsById:s,nextActionId:b,stagedActionIds:c,skippedActionIds:g,committedState:T,currentStateIndex:f,computedStates:p,isLocked:F,isPaused:x}=l.nextLiftedState);break}case qe:{C=0,r.maxAge&&c.length>r.maxAge&&(p=$e(p,C,i,T,s,c,g,e,x),j(c.length-r.maxAge),C=1/0);break}case et:{if(p.filter(_=>_.error).length>0)C=0,r.maxAge&&c.length>r.maxAge&&(p=$e(p,C,i,T,s,c,g,e,x),j(c.length-r.maxAge),C=1/0);else{if(!x&&!F){f===c.length-1&&f++;let _=b++;s[_]=new fe(l,+Date.now()),c=[...c,_],C=c.length-1,p=$e(p,C,i,T,s,c,g,e,x)}p=p.map(_=>q(I({},_),{state:i(_.state,Dr)})),f=c.length-1,r.maxAge&&c.length>r.maxAge&&j(c.length-r.maxAge),C=1/0}break}default:{C=1/0;break}}return p=$e(p,C,i,T,s,c,g,e,x),h=o(h,l),{monitorState:h,actionsById:s,nextActionId:b,stagedActionIds:c,skippedActionIds:g,committedState:T,currentStateIndex:f,computedStates:p,isLocked:F,isPaused:x}}}var yo=(()=>{class t{constructor(e,o,r,i,a,l,h,s){let b=Nr(h,s.monitor),c=Fr(h,b,l,s.monitor,s),g=ie(ie(o.asObservable().pipe(Dt(1)),i.actions$).pipe(O(ye)),e,i.liftedActions$).pipe(Mt(Ot)),T=r.pipe(O(c)),f=Do(s.connectInZone),p=new Ct(1);this.liftedStateSubscription=g.pipe(se(T),bo(f),kt(({state:j},[B,C])=>{let M=C(j,B);return B.type!==be&&Ro(s)&&(M=kr(M,s.predicate,s.actionsSafelist,s.actionsBlocklist)),i.notify(B,M),{state:M,action:B}},{state:b,action:null})).subscribe(({state:j,action:B})=>{if(p.next(j),B.type===be){let C=B.action;a.next(C)}}),this.extensionStartSubscription=i.start$.pipe(bo(f)).subscribe(()=>{this.refresh()});let F=p.asObservable(),x=F.pipe(O(Io));Object.defineProperty(x,"state",{value:un(x,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=e,this.liftedState=F,this.state=x}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(e){this.dispatcher.next(e)}next(e){this.dispatcher.next(e)}error(e){}complete(){}performAction(e){this.dispatch(new fe(e,+Date.now()))}refresh(){this.dispatch(new st)}reset(){this.dispatch(new at(+Date.now()))}rollback(){this.dispatch(new ct(+Date.now()))}commit(){this.dispatch(new lt(+Date.now()))}sweep(){this.dispatch(new dt)}toggleAction(e){this.dispatch(new ut(e))}jumpToAction(e){this.dispatch(new mt(e))}jumpToState(e){this.dispatch(new pt(e))}importState(e){this.dispatch(new ft(e))}lockChanges(e){this.dispatch(new ht(e))}pauseRecording(e){this.dispatch(new gt(e))}static{this.\u0275fac=function(o){return new(o||t)(E(Ye),E(Ie),E(gn),E(No),E(Ae),E(Se),E(mn),E(Ke))}}static{this.\u0275prov=S({token:t,factory:t.\u0275fac})}}return t})();function bo({ngZone:t,connectInZone:n}){return e=>n?new z(o=>e.subscribe({next:r=>t.run(()=>o.next(r)),error:r=>t.run(()=>o.error(r)),complete:()=>t.run(()=>o.complete())})):e}var jr=new N("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function Br(t,n){return!!t||n.monitor!==Po}function Lr(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function Ur(t){return t.state}function jo(t={}){return Z([No,Ye,yo,{provide:ho,useValue:t},{provide:jr,deps:[vt,Ke],useFactory:Br},{provide:vt,useFactory:Lr},{provide:Ke,deps:[ho],useFactory:Pr},{provide:yn,deps:[yo],useFactory:Ur},{provide:vn,useExisting:Ye}])}var Ve=class t{CUSTOMER_KEY="khatabook_customers";TRANSACTION_KEY="khatabook_transactions";constructor(){}getCustomers(){let n=localStorage.getItem(this.CUSTOMER_KEY),e=n?JSON.parse(n):[];return D(e).pipe(he(300))}saveCustomers(n){return localStorage.setItem(this.CUSTOMER_KEY,JSON.stringify(n)),D(!0).pipe(he(200))}getTransactions(){let n=localStorage.getItem(this.TRANSACTION_KEY),e=n?JSON.parse(n):[];return D(e).pipe(he(300))}saveTransactions(n){return localStorage.setItem(this.TRANSACTION_KEY,JSON.stringify(n)),D(!0).pipe(he(200))}clearData(){localStorage.removeItem(this.CUSTOMER_KEY),localStorage.removeItem(this.TRANSACTION_KEY)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})};var Ge=class t{actions$=u(po);localStorageService=u(Ve);store=u(Q);loadCustomers$=pe(()=>this.actions$.pipe(me(ke),re(()=>this.localStorageService.getCustomers().pipe(O(n=>In({customers:n})),ee(n=>D(An({error:n})))))));loadTransactions$=pe(()=>this.actions$.pipe(me(De),re(()=>this.localStorageService.getTransactions().pipe(O(n=>Dn({transactions:n})),ee(n=>D(Nn({error:n})))))));persistCustomers$=pe(()=>this.actions$.pipe(me(Re,Rn,kn),se(this.store.select(Un)),Je(([n,e])=>{this.localStorageService.saveCustomers(e).subscribe()})),{dispatch:!1});persistTransactions$=pe(()=>this.actions$.pipe(me(tt,jn,Fn),se(this.store.select(zn)),Je(([n,e])=>{this.localStorageService.saveTransactions(e).subscribe()})),{dispatch:!1});updateCustomerBalance$=pe(()=>this.actions$.pipe(me(tt),se(this.store.select($n)),O(([{transaction:n},e])=>{let o=e[n.customerId];if(o){let r=o.currentBalance;n.type==="GAVE"?r+=n.amount:r-=n.amount;let i=q(I({},o),{currentBalance:r,lastUpdated:new Date().toISOString()});return{type:"NO_OP"}}return{type:"NO_OP"}})),{dispatch:!1});static \u0275fac=function(e){return new(e||t)};static \u0275prov=S({token:t,factory:t.\u0275fac})};var Bo={providers:[Lt(),dn(no),bn({customers:Bn,transactions:Ln}),fo([Ge]),jo({maxAge:25,logOnly:!Qe()}),eo(),qn(),ao("ngsw-worker.js",{enabled:!Qe(),registrationStrategy:"registerWhenStable:30000"})]};var He=class t{title=Te("khatabook");static \u0275fac=function(e){return new(e||t)};static \u0275cmp=J({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(e,o){e&1&&U(0,"router-outlet")},dependencies:[we],encapsulation:2})};cn(He,Bo).catch(t=>console.error(t));
