<div class="settings-container">
  <header class="settings-header">
    <button mat-icon-button (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <h1>{{ translationService.t().settings.title }}</h1>
  </header>

  <div class="settings-content">
    <!-- Language Section -->
    <section class="settings-section">
      <h2 class="section-title">{{ translationService.t().settings.language }}</h2>
      <div class="settings-card">
        <div class="setting-item" (click)="changeLanguage()">
          <div class="setting-info">
            <mat-icon>translate</mat-icon>
            <div class="setting-text">
              <span class="label">{{ translationService.t().settings.language }}</span>
              <span class="description">{{ translationService.t().settings.language_desc }}</span>
            </div>
          </div>
          <mat-icon class="chevron">chevron_right</mat-icon>
        </div>
      </div>
    </section>

    <!-- Appearance Section -->
    <section class="settings-section">
      <h2 class="section-title">{{ translationService.t().settings.appearance }}</h2>
      <div class="settings-card">
        <div class="setting-item" (click)="themeService.toggleTheme()">
          <div class="setting-info">
            <mat-icon>{{ themeService.currentTheme() === 'dark' ? 'light_mode' : 'dark_mode' }}</mat-icon>
            <div class="setting-text">
              <span class="label">{{ translationService.t().settings.dark_mode }}</span>
              <span class="description">{{ themeService.currentTheme() === 'dark' ? translationService.t().settings.dark_mode_on : translationService.t().settings.dark_mode_off }}</span>
            </div>
          </div>
          <mat-icon class="chevron">chevron_right</mat-icon>
        </div>
      </div>
    </section>

    <!-- Analytics Section -->
    <section class="settings-section">
      <h2 class="section-title">{{ translationService.t().settings.analytics }}</h2>
      <div class="settings-card">
        <div class="setting-item" (click)="goToReports()">
          <div class="setting-info">
            <mat-icon>bar_chart</mat-icon>
            <div class="setting-text">
              <span class="label">{{ translationService.t().settings.reports }}</span>
              <span class="description">{{ translationService.t().settings.reports_desc }}</span>
            </div>
          </div>
          <mat-icon class="chevron">chevron_right</mat-icon>
        </div>
      </div>
    </section>

    <!-- Data Management Section -->
    <section class="settings-section">
      <h2 class="section-title">{{ translationService.t().settings.data_management }}</h2>
      <div class="settings-card">
        <div class="setting-item" (click)="exportData()">
          <div class="setting-info">
            <mat-icon>download</mat-icon>
            <div class="setting-text">
              <span class="label">{{ translationService.t().settings.export_backup }}</span>
              <span class="description">{{ translationService.t().settings.export_backup_desc }}</span>
            </div>
          </div>
          <mat-icon class="chevron">chevron_right</mat-icon>
        </div>
        
        <mat-divider></mat-divider>

        <div class="setting-item" (click)="fileInput.click()">
          <div class="setting-info">
            <mat-icon>upload</mat-icon>
            <div class="setting-text">
              <span class="label">{{ translationService.t().settings.import_backup }}</span>
              <span class="description">{{ translationService.t().settings.import_backup_desc }}</span>
            </div>
          </div>
          <mat-icon class="chevron">chevron_right</mat-icon>
        </div>
        <input type="file" #fileInput (change)="importData($event)" accept=".json" style="display: none">
      </div>

    </section>

    <!-- Danger Zone Section -->
    <section class="settings-section">
      <h2 class="section-title text-danger">{{ translationService.t().settings.danger_zone }}</h2>
      <div class="settings-card danger-card">
        <div class="setting-item" (click)="factoryReset()">
          <div class="setting-info">
            <mat-icon color="warn">delete_forever</mat-icon>
            <div class="setting-text">
              <span class="label text-danger">{{ translationService.t().settings.factory_reset }}</span>
              <span class="description">{{ translationService.t().settings.factory_reset_desc }}</span>
            </div>
          </div>
          <mat-icon class="chevron">chevron_right</mat-icon>
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section class="settings-section">
      <h2 class="section-title">{{ translationService.t().settings.about }}</h2>
      <div class="settings-card">
        <div class="setting-item inactive">
          <div class="setting-info">
            <mat-icon>info</mat-icon>
            <div class="setting-text">
              <span class="label">{{ translationService.t().settings.version }}</span>
              <span class="description">{{ version }}</span>
            </div>
          </div>
        </div>
        
        <mat-divider></mat-divider>

        <div class="setting-item">
          <div class="setting-info">
            <mat-icon>help</mat-icon>
            <div class="setting-text">
              <span class="label">{{ translationService.t().settings.help_support }}</span>
              <span class="description">{{ translationService.t().settings.help_support_desc }}</span>
            </div>
          </div>
          <mat-icon class="chevron">open_in_new</mat-icon>
        </div>
      </div>
    </section>

    <div class="footer-msg">
      {{ translationService.t().settings.footer_msg }}
    </div>
  </div>
</div>
